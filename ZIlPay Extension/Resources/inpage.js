var inpage=function(t){"use strict";const e="zil-pay",r={CONTENT:`@/${e}/content-script`,INJECTED:`@/${e}/injected-script`},i={GET_WALLET_DATA:`@/${e}/injected-get-wallet-data`,ADDRESS_CHANGED:`@/${e}/address-changed`,NETWORK_CHANGED:`@/${e}/network-changed`,LOCK_STAUS:`@/${e}/lack-status-updated`,CONTENT_PROXY_MEHTOD:`@/${e}/request-through-content`,CONTENT_PROXY_RESULT:`@/${e}/response-from-content`,CALL_TO_SIGN_TX:`@/${e}/request-to-sign-tx`,TX_RESULT:`@/${e}/response-tx-result`,SIGN_MESSAGE:`@/${e}/request-to-sign-message`,SING_MESSAGE_RES:`@/${e}/response-sign-message`,NEW_BLOCK:`@/${e}/new-block-created`,CONNECT_APP:`@/${e}/request-to-connect-dapp`,RESPONSE_TO_DAPP:`@/${e}/response-dapp-connect`};function n(t,e,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)}function o(t,e,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,r):n?n.value=r:e.set(t,r),r}var s,h,u,a,f;const{document:d}=globalThis;class l{constructor(t){s.add(this),h.set(this,void 0),o(this,h,t,"f")}listen(t){d.addEventListener(n(this,h,"f"),(e=>{const r=e.detail;r&&t(JSON.parse(r))}))}send(t,e){t.from=n(this,h,"f"),Object.values(r).includes(e)&&n(this,s,"m",u).call(this,JSON.stringify(t),e)}}var c;h=new WeakMap,s=new WeakSet,u=function(t,e){d.dispatchEvent(n(this,s,"m",f).call(this,t,e))},a=function(t){return{detail:t}},f=function(t,e){return new CustomEvent(e,n(this,s,"m",a).call(this,t))};class p{constructor(){c.set(this,[])}on(t){return n(this,c,"f").push(t),()=>this.removeListener(t)}removeListener(t){const e=n(this,c,"f").indexOf(t);e>-1&&n(this,c,"f").splice(e,1)}removeAllListeners(){n(this,c,"f").splice(0,n(this,c,"f").length)}emit(...t){n(this,c,"f").forEach((e=>e.apply(this,t)))}once(t){const e=this.on(((...r)=>{e(),t.apply(this,r)}))}}c=new WeakMap;class m{constructor(t){this._body=t}get type(){return this._body.type}get payload(){return this._body.payload}send(t,e){const r=JSON.stringify(this._body),i=JSON.parse(r);t.send(i,e)}}var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},v={exports:{}};(function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function n(t,e,r){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function h(t,e,r){var i=s(t,r);return r-1>=e&&(i|=s(t,r-1)<<4),i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),s=e;s<o;s++){var h=t.charCodeAt(s)-48;n*=i,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,h=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<h&67108863,this.words[o+1]=s>>>26-h&67108863,(h+=24)>=26&&(h-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<h&67108863,this.words[o+1]=s>>>26-h&67108863,(h+=24)>=26&&(h-=26,o++);return this.strip()},n.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=h(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=h(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,s=o%i,h=Math.min(o,o-s)+r,a=0,f=r;f<h;f+=i)a=u(t,f,f+i,e),this.imuln(n),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==s){var d=1;for(a=u(t,f,t.length,e),f=0;f<s;f++)d*=e;this.imuln(d),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,h=67108863&s,u=s/67108864|0;r.words[0]=h;for(var a=1;a<i;a++){for(var f=u>>>26,d=67108863&u,l=Math.min(a,e.length-1),c=Math.max(0,a-t.length+1);c<=l;c++){var p=a-c|0;f+=(s=(n=0|t.words[p])*(o=0|e.words[c])+d)/67108864|0,d=67108863&s}r.words[a]=0|d,u=0|f}return 0!==u?r.words[a]=0|u:r.length--,r.strip()}n.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var h=this.words[s],u=(16777215&(h<<n|o)).toString(16);i=0!=(o=h>>>24-n&16777215)||s!==this.length-1?a[6-u.length]+u+i:u+i,(n+=2)>=26&&(n-=26,s--)}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=f[t],c=d[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(c).toString(t);i=(p=p.idivn(c)).isZero()?m+i:a[l-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,h,u="le"===e,a=new t(o),f=this.clone();if(u){for(h=0;!f.isZero();h++)s=f.andln(255),f.iushrn(8),a[h]=s;for(;h<o;h++)a[h]=0}else{for(h=0;h<o-n;h++)a[h]=0;for(h=0;!f.isZero();h++)s=f.andln(255),f.iushrn(8),a[o-h-1]=s}return a},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(e=(0|r.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,r){var i,n,o,s=t.words,h=e.words,u=r.words,a=0,f=0|s[0],d=8191&f,l=f>>>13,c=0|s[1],p=8191&c,m=c>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],w=8191&b,M=b>>>13,S=0|s[4],A=8191&S,_=S>>>13,x=0|s[5],E=8191&x,I=x>>>13,B=0|s[6],T=8191&B,N=B>>>13,R=0|s[7],P=8191&R,k=R>>>13,q=0|s[8],O=8191&q,C=q>>>13,z=0|s[9],L=8191&z,G=z>>>13,D=0|h[0],j=8191&D,U=D>>>13,F=0|h[1],$=8191&F,H=F>>>13,Y=0|h[2],W=8191&Y,Z=Y>>>13,J=0|h[3],K=8191&J,X=J>>>13,V=0|h[4],Q=8191&V,tt=V>>>13,et=0|h[5],rt=8191&et,it=et>>>13,nt=0|h[6],ot=8191&nt,st=nt>>>13,ht=0|h[7],ut=8191&ht,at=ht>>>13,ft=0|h[8],dt=8191&ft,lt=ft>>>13,ct=0|h[9],pt=8191&ct,mt=ct>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(a+(i=Math.imul(d,j))|0)+((8191&(n=(n=Math.imul(d,U))+Math.imul(l,j)|0))<<13)|0;a=((o=Math.imul(l,U))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(p,j),n=(n=Math.imul(p,U))+Math.imul(m,j)|0,o=Math.imul(m,U);var vt=(a+(i=i+Math.imul(d,$)|0)|0)+((8191&(n=(n=n+Math.imul(d,H)|0)+Math.imul(l,$)|0))<<13)|0;a=((o=o+Math.imul(l,H)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(v,j),n=(n=Math.imul(v,U))+Math.imul(y,j)|0,o=Math.imul(y,U),i=i+Math.imul(p,$)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,H)|0;var yt=(a+(i=i+Math.imul(d,W)|0)|0)+((8191&(n=(n=n+Math.imul(d,Z)|0)+Math.imul(l,W)|0))<<13)|0;a=((o=o+Math.imul(l,Z)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(w,j),n=(n=Math.imul(w,U))+Math.imul(M,j)|0,o=Math.imul(M,U),i=i+Math.imul(v,$)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,H)|0,i=i+Math.imul(p,W)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,Z)|0;var bt=(a+(i=i+Math.imul(d,K)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(l,K)|0))<<13)|0;a=((o=o+Math.imul(l,X)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,j),n=(n=Math.imul(A,U))+Math.imul(_,j)|0,o=Math.imul(_,U),i=i+Math.imul(w,$)|0,n=(n=n+Math.imul(w,H)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,H)|0,i=i+Math.imul(v,W)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,Z)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,X)|0;var wt=(a+(i=i+Math.imul(d,Q)|0)|0)+((8191&(n=(n=n+Math.imul(d,tt)|0)+Math.imul(l,Q)|0))<<13)|0;a=((o=o+Math.imul(l,tt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(E,j),n=(n=Math.imul(E,U))+Math.imul(I,j)|0,o=Math.imul(I,U),i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,H)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(w,W)|0,n=(n=n+Math.imul(w,Z)|0)+Math.imul(M,W)|0,o=o+Math.imul(M,Z)|0,i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,X)|0)+Math.imul(y,K)|0,o=o+Math.imul(y,X)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var Mt=(a+(i=i+Math.imul(d,rt)|0)|0)+((8191&(n=(n=n+Math.imul(d,it)|0)+Math.imul(l,rt)|0))<<13)|0;a=((o=o+Math.imul(l,it)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(T,j),n=(n=Math.imul(T,U))+Math.imul(N,j)|0,o=Math.imul(N,U),i=i+Math.imul(E,$)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,H)|0,i=i+Math.imul(A,W)|0,n=(n=n+Math.imul(A,Z)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(w,K)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,X)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,i=i+Math.imul(p,rt)|0,n=(n=n+Math.imul(p,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var St=(a+(i=i+Math.imul(d,ot)|0)|0)+((8191&(n=(n=n+Math.imul(d,st)|0)+Math.imul(l,ot)|0))<<13)|0;a=((o=o+Math.imul(l,st)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(P,j),n=(n=Math.imul(P,U))+Math.imul(k,j)|0,o=Math.imul(k,U),i=i+Math.imul(T,$)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(E,W)|0,n=(n=n+Math.imul(E,Z)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(A,K)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,X)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,i=i+Math.imul(v,rt)|0,n=(n=n+Math.imul(v,it)|0)+Math.imul(y,rt)|0,o=o+Math.imul(y,it)|0,i=i+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var At=(a+(i=i+Math.imul(d,ut)|0)|0)+((8191&(n=(n=n+Math.imul(d,at)|0)+Math.imul(l,ut)|0))<<13)|0;a=((o=o+Math.imul(l,at)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,j),n=(n=Math.imul(O,U))+Math.imul(C,j)|0,o=Math.imul(C,U),i=i+Math.imul(P,$)|0,n=(n=n+Math.imul(P,H)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,H)|0,i=i+Math.imul(T,W)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(E,K)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,i=i+Math.imul(w,rt)|0,n=(n=n+Math.imul(w,it)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,it)|0,i=i+Math.imul(v,ot)|0,n=(n=n+Math.imul(v,st)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,i=i+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,at)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,at)|0;var _t=(a+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,lt)|0)+Math.imul(l,dt)|0))<<13)|0;a=((o=o+Math.imul(l,lt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(L,j),n=(n=Math.imul(L,U))+Math.imul(G,j)|0,o=Math.imul(G,U),i=i+Math.imul(O,$)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,H)|0,i=i+Math.imul(P,W)|0,n=(n=n+Math.imul(P,Z)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,Z)|0,i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,X)|0,i=i+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,it)|0,i=i+Math.imul(w,ot)|0,n=(n=n+Math.imul(w,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,i=i+Math.imul(v,ut)|0,n=(n=n+Math.imul(v,at)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,at)|0,i=i+Math.imul(p,dt)|0,n=(n=n+Math.imul(p,lt)|0)+Math.imul(m,dt)|0,o=o+Math.imul(m,lt)|0;var xt=(a+(i=i+Math.imul(d,pt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(l,pt)|0))<<13)|0;a=((o=o+Math.imul(l,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(L,$),n=(n=Math.imul(L,H))+Math.imul(G,$)|0,o=Math.imul(G,H),i=i+Math.imul(O,W)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,Z)|0,i=i+Math.imul(P,K)|0,n=(n=n+Math.imul(P,X)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,X)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,i=i+Math.imul(E,rt)|0,n=(n=n+Math.imul(E,it)|0)+Math.imul(I,rt)|0,o=o+Math.imul(I,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,i=i+Math.imul(w,ut)|0,n=(n=n+Math.imul(w,at)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,at)|0,i=i+Math.imul(v,dt)|0,n=(n=n+Math.imul(v,lt)|0)+Math.imul(y,dt)|0,o=o+Math.imul(y,lt)|0;var Et=(a+(i=i+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;a=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(L,W),n=(n=Math.imul(L,Z))+Math.imul(G,W)|0,o=Math.imul(G,Z),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,X)|0,i=i+Math.imul(P,Q)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,i=i+Math.imul(T,rt)|0,n=(n=n+Math.imul(T,it)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,it)|0,i=i+Math.imul(E,ot)|0,n=(n=n+Math.imul(E,st)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,st)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,at)|0,i=i+Math.imul(w,dt)|0,n=(n=n+Math.imul(w,lt)|0)+Math.imul(M,dt)|0,o=o+Math.imul(M,lt)|0;var It=(a+(i=i+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;a=((o=o+Math.imul(y,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(L,K),n=(n=Math.imul(L,X))+Math.imul(G,K)|0,o=Math.imul(G,X),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,i=i+Math.imul(P,rt)|0,n=(n=n+Math.imul(P,it)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,it)|0,i=i+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,i=i+Math.imul(E,ut)|0,n=(n=n+Math.imul(E,at)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,at)|0,i=i+Math.imul(A,dt)|0,n=(n=n+Math.imul(A,lt)|0)+Math.imul(_,dt)|0,o=o+Math.imul(_,lt)|0;var Bt=(a+(i=i+Math.imul(w,pt)|0)|0)+((8191&(n=(n=n+Math.imul(w,mt)|0)+Math.imul(M,pt)|0))<<13)|0;a=((o=o+Math.imul(M,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(L,Q),n=(n=Math.imul(L,tt))+Math.imul(G,Q)|0,o=Math.imul(G,tt),i=i+Math.imul(O,rt)|0,n=(n=n+Math.imul(O,it)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,it)|0,i=i+Math.imul(P,ot)|0,n=(n=n+Math.imul(P,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,i=i+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,at)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,at)|0,i=i+Math.imul(E,dt)|0,n=(n=n+Math.imul(E,lt)|0)+Math.imul(I,dt)|0,o=o+Math.imul(I,lt)|0;var Tt=(a+(i=i+Math.imul(A,pt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(_,pt)|0))<<13)|0;a=((o=o+Math.imul(_,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(L,rt),n=(n=Math.imul(L,it))+Math.imul(G,rt)|0,o=Math.imul(G,it),i=i+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,i=i+Math.imul(P,ut)|0,n=(n=n+Math.imul(P,at)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,at)|0,i=i+Math.imul(T,dt)|0,n=(n=n+Math.imul(T,lt)|0)+Math.imul(N,dt)|0,o=o+Math.imul(N,lt)|0;var Nt=(a+(i=i+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,mt)|0)+Math.imul(I,pt)|0))<<13)|0;a=((o=o+Math.imul(I,mt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,i=Math.imul(L,ot),n=(n=Math.imul(L,st))+Math.imul(G,ot)|0,o=Math.imul(G,st),i=i+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,at)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,at)|0,i=i+Math.imul(P,dt)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(k,dt)|0,o=o+Math.imul(k,lt)|0;var Rt=(a+(i=i+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,mt)|0)+Math.imul(N,pt)|0))<<13)|0;a=((o=o+Math.imul(N,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(L,ut),n=(n=Math.imul(L,at))+Math.imul(G,ut)|0,o=Math.imul(G,at),i=i+Math.imul(O,dt)|0,n=(n=n+Math.imul(O,lt)|0)+Math.imul(C,dt)|0,o=o+Math.imul(C,lt)|0;var Pt=(a+(i=i+Math.imul(P,pt)|0)|0)+((8191&(n=(n=n+Math.imul(P,mt)|0)+Math.imul(k,pt)|0))<<13)|0;a=((o=o+Math.imul(k,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(L,dt),n=(n=Math.imul(L,lt))+Math.imul(G,dt)|0,o=Math.imul(G,lt);var kt=(a+(i=i+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(C,pt)|0))<<13)|0;a=((o=o+Math.imul(C,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863;var qt=(a+(i=Math.imul(L,pt))|0)+((8191&(n=(n=Math.imul(L,mt))+Math.imul(G,pt)|0))<<13)|0;return a=((o=Math.imul(G,mt))+(n>>>13)|0)+(qt>>>26)|0,qt&=67108863,u[0]=gt,u[1]=vt,u[2]=yt,u[3]=bt,u[4]=wt,u[5]=Mt,u[6]=St,u[7]=At,u[8]=_t,u[9]=xt,u[10]=Et,u[11]=It,u[12]=Bt,u[13]=Tt,u[14]=Nt,u[15]=Rt,u[16]=Pt,u[17]=kt,u[18]=qt,0!==a&&(u[19]=a,r.length++),r};function p(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(c=l),n.prototype.mulTo=function(t,e){var r,i=this.length+t.length;return r=10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var s=n;n=0;for(var h=67108863&i,u=Math.min(o,e.length-1),a=Math.max(0,o-t.length+1);a<=u;a++){var f=o-a,d=(0|t.words[f])*(0|e.words[a]),l=67108863&d;h=67108863&(l=l+h|0),n+=(s=(s=s+(d/67108864|0)|0)+(l>>>26)|0)>>>26,s&=67108863}r.words[o]=h,i=s,s=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):p(this,t,e),r},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=n.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var s=0;s<o;s++)i[s]=e[t[s]],n[s]=r[t[s]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var s=1;s<n;s<<=1)for(var h=s<<1,u=Math.cos(2*Math.PI/h),a=Math.sin(2*Math.PI/h),f=0;f<n;f+=h)for(var d=u,l=a,c=0;c<s;c++){var p=r[f+c],m=i[f+c],g=r[f+c+s],v=i[f+c+s],y=d*g-l*v;v=d*v+l*g,g=y,r[f+c]=p+g,i[f+c]=m+v,r[f+c+s]=p-g,i[f+c+s]=m-v,c!==h&&(y=u*d-a*l,l=u*l+a*d,d=y)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),u=new Array(i),a=new Array(i),f=new Array(i),d=new Array(i),l=r.words;l.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(e.words,e.length,a,i),this.transform(s,o,h,u,i,n),this.transform(a,o,f,d,i,n);for(var c=0;c<i;c++){var p=h[c]*f[c]-u[c]*d[c];u[c]=h[c]*d[c]+u[c]*f[c],h[c]=p}return this.conjugate(h,u,i),this.transform(h,u,l,o,i,n),this.conjugate(l,o,i),this.normalize13b(l,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),p(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new n(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var o=r.sqr();i<e.length;i++,o=o.sqr())0!==e[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var h=this.words[e]&o,u=(0|this.words[e])-h<<i;this.words[e]=u|s,s=h>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),h=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var a=0;a<s;a++)u.words[a]=this.words[a];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var f=0;for(a=this.length-1;a>=0&&(0!==f||a>=n);a--){var d=0|this.words[a];this.words[a]=f<<26-o|d>>>o,f=d&h}return u&&0!==f&&(u.words[u.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var h=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+h;var u=(0|t.words[n])*e;h=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)h=(o=(0|this.words[n+i])+h)>>26,this.words[n+i]=67108863&o;if(0===h)return this.strip();for(r(-1===h),h=0,n=0;n<this.length;n++)h=(o=-(0|this.words[n])+h)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),o=t,s=0|o.words[o.length-1];0!=(r=26-this._countBits(s))&&(o=o.ushln(r),i.iushln(r),s=0|o.words[o.length-1]);var h,u=i.length-o.length;if("mod"!==e){(h=new n(null)).length=u+1,h.words=new Array(h.length);for(var a=0;a<h.length;a++)h.words[a]=0}var f=i.clone()._ishlnsubmul(o,1,u);0===f.negative&&(i=f,h&&(h.words[u]=1));for(var d=u-1;d>=0;d--){var l=67108864*(0|i.words[o.length+d])+(0|i.words[o.length+d-1]);for(l=Math.min(l/s|0,67108863),i._ishlnsubmul(o,l,d);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(o,1,d),i.isZero()||(i.negative^=1);h&&(h.words[d]=l)}return h&&h.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:h||null,mod:i}},n.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(h=this.neg().divmod(t,e),"mod"!==e&&(o=h.div.neg()),"div"!==e&&(s=h.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(h=this.divmod(t.neg(),e),"mod"!==e&&(o=h.div.neg()),{div:o,mod:h.mod}):0!=(this.negative&t.negative)?(h=this.neg().divmod(t.neg(),e),"div"!==e&&(s=h.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:h.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e);var o,s,h},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},n.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),s=new n(0),h=new n(0),u=new n(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var f=i.clone(),d=e.clone();!e.isZero();){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(f),s.isub(d)),o.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(h.isOdd()||u.isOdd())&&(h.iadd(f),u.isub(d)),h.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(h),s.isub(u)):(i.isub(e),h.isub(o),u.isub(s))}return{a:h,b:u,gcd:i.iushln(a)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new n(1),h=new n(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,f=1;0==(e.words[0]&f)&&a<26;++a,f<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var d=0,l=1;0==(i.words[0]&l)&&d<26;++d,l<<=1);if(d>0)for(i.iushrn(d);d-- >0;)h.isOdd()&&h.iadd(u),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(h)):(i.isub(e),h.isub(s))}return(o=0===e.cmpn(1)?s:h).cmpn(0)<0&&o.iadd(t),o},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var h=0|this.words[s];o=(h+=o)>>>26,h&=67108863,this.words[s]=h}return 0!==o&&(this.words[s]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(y,v),y.prototype.split=function(t,e){for(var r=4194303,i=Math.min(t.length,9),n=0;n<i;n++)e.words[n]=t.words[n];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,n=10;n<t.length;n++){var s=0|t.words[n];t.words[n-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new n(1)).iushrn(2);return this.pow(t,i)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var h=new n(1).toRed(this),u=h.redNeg(),a=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);0!==this.pow(f,a).cmp(u);)f.redIAdd(u);for(var d=this.pow(f,o),l=this.pow(t,o.addn(1).iushrn(1)),c=this.pow(t,o),p=s;0!==c.cmp(h);){for(var m=c,g=0;0!==m.cmp(h);g++)m=m.redSqr();r(g<p);var v=this.pow(d,new n(1).iushln(p-g-1));l=l.redMul(v),d=v.redSqr(),c=c.redMul(d),p=g}return l},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var o=r[0],s=0,h=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var a=e.words[i],f=u-1;f>=0;f--){var d=a>>f&1;o!==r[0]&&(o=this.sqr(o)),0!==d||0!==s?(s<<=1,s|=d,(4==++h||0===i&&0===f)&&(o=this.mul(o,r[s]),h=0,s=0)):h=0}u=26}return o},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new A(t)},i(A,S),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}})(v,g);var y=v.exports,b=M,w=null;try{w=new null.Instance(new null.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function M(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function S(t){return!0===(t&&t.__isLong__)}M.prototype.__isLong__,Object.defineProperty(M.prototype,"__isLong__",{value:!0}),M.isLong=S;var A={},_={};function x(t,e){var r,i,n;return e?(n=0<=(t>>>=0)&&t<256)&&(i=_[t])?i:(r=I(t,(0|t)<0?-1:0,!0),n&&(_[t]=r),r):(n=-128<=(t|=0)&&t<128)&&(i=A[t])?i:(r=I(t,t<0?-1:0,!1),n&&(A[t]=r),r)}function E(t,e){if(isNaN(t))return e?C:O;if(e){if(t<0)return C;if(t>=P)return j}else{if(t<=-k)return U;if(t+1>=k)return D}return t<0?E(-t,e).neg():I(t%R|0,t/R|0,e)}function I(t,e,r){return new M(t,e,r)}M.fromInt=x,M.fromNumber=E,M.fromBits=I;var B=Math.pow;function T(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return O;if("number"==typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return T(t.substring(1),e,r).neg();for(var n=E(B(r,8)),o=O,s=0;s<t.length;s+=8){var h=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+h),r);if(h<8){var a=E(B(r,h));o=o.mul(a).add(E(u))}else o=(o=o.mul(n)).add(E(u))}return o.unsigned=e,o}function N(t,e){return"number"==typeof t?E(t,e):"string"==typeof t?T(t,e):I(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}M.fromString=T,M.fromValue=N;var R=4294967296,P=R*R,k=P/2,q=x(1<<24),O=x(0);M.ZERO=O;var C=x(0,!0);M.UZERO=C;var z=x(1);M.ONE=z;var L=x(1,!0);M.UONE=L;var G=x(-1);M.NEG_ONE=G;var D=I(-1,2147483647,!1);M.MAX_VALUE=D;var j=I(-1,-1,!0);M.MAX_UNSIGNED_VALUE=j;var U=I(0,-2147483648,!1);M.MIN_VALUE=U;var F=M.prototype;F.toInt=function(){return this.unsigned?this.low>>>0:this.low},F.toNumber=function(){return this.unsigned?(this.high>>>0)*R+(this.low>>>0):this.high*R+(this.low>>>0)},F.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(U)){var e=E(t),r=this.div(e),i=r.mul(e).sub(this);return r.toString(t)+i.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=E(B(t,6),this.unsigned),o=this,s="";;){var h=o.div(n),u=(o.sub(h.mul(n)).toInt()>>>0).toString(t);if((o=h).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},F.getHighBits=function(){return this.high},F.getHighBitsUnsigned=function(){return this.high>>>0},F.getLowBits=function(){return this.low},F.getLowBitsUnsigned=function(){return this.low>>>0},F.getNumBitsAbs=function(){if(this.isNegative())return this.eq(U)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},F.isZero=function(){return 0===this.high&&0===this.low},F.eqz=F.isZero,F.isNegative=function(){return!this.unsigned&&this.high<0},F.isPositive=function(){return this.unsigned||this.high>=0},F.isOdd=function(){return 1==(1&this.low)},F.isEven=function(){return 0==(1&this.low)},F.equals=function(t){return S(t)||(t=N(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},F.eq=F.equals,F.notEquals=function(t){return!this.eq(t)},F.neq=F.notEquals,F.ne=F.notEquals,F.lessThan=function(t){return this.comp(t)<0},F.lt=F.lessThan,F.lessThanOrEqual=function(t){return this.comp(t)<=0},F.lte=F.lessThanOrEqual,F.le=F.lessThanOrEqual,F.greaterThan=function(t){return this.comp(t)>0},F.gt=F.greaterThan,F.greaterThanOrEqual=function(t){return this.comp(t)>=0},F.gte=F.greaterThanOrEqual,F.ge=F.greaterThanOrEqual,F.compare=function(t){if(S(t)||(t=N(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},F.comp=F.compare,F.negate=function(){return!this.unsigned&&this.eq(U)?U:this.not().add(z)},F.neg=F.negate,F.add=function(t){S(t)||(t=N(t));var e=this.high>>>16,r=65535&this.high,i=this.low>>>16,n=65535&this.low,o=t.high>>>16,s=65535&t.high,h=t.low>>>16,u=0,a=0,f=0,d=0;return f+=(d+=n+(65535&t.low))>>>16,a+=(f+=i+h)>>>16,u+=(a+=r+s)>>>16,u+=e+o,I((f&=65535)<<16|(d&=65535),(u&=65535)<<16|(a&=65535),this.unsigned)},F.subtract=function(t){return S(t)||(t=N(t)),this.add(t.neg())},F.sub=F.subtract,F.multiply=function(t){if(this.isZero())return O;if(S(t)||(t=N(t)),w)return I(w.mul(this.low,this.high,t.low,t.high),w.get_high(),this.unsigned);if(t.isZero())return O;if(this.eq(U))return t.isOdd()?U:O;if(t.eq(U))return this.isOdd()?U:O;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(q)&&t.lt(q))return E(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=65535&this.high,i=this.low>>>16,n=65535&this.low,o=t.high>>>16,s=65535&t.high,h=t.low>>>16,u=65535&t.low,a=0,f=0,d=0,l=0;return d+=(l+=n*u)>>>16,f+=(d+=i*u)>>>16,d&=65535,f+=(d+=n*h)>>>16,a+=(f+=r*u)>>>16,f&=65535,a+=(f+=i*h)>>>16,f&=65535,a+=(f+=n*s)>>>16,a+=e*u+r*h+i*s+n*o,I((d&=65535)<<16|(l&=65535),(a&=65535)<<16|(f&=65535),this.unsigned)},F.mul=F.multiply,F.divide=function(t){if(S(t)||(t=N(t)),t.isZero())throw Error("division by zero");var e,r,i;if(w)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?I((this.unsigned?w.div_u:w.div_s)(this.low,this.high,t.low,t.high),w.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?C:O;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return C;if(t.gt(this.shru(1)))return L;i=C}else{if(this.eq(U))return t.eq(z)||t.eq(G)?U:t.eq(U)?z:(e=this.shr(1).div(t).shl(1)).eq(O)?t.isNegative()?z:G:(r=this.sub(t.mul(e)),i=e.add(r.div(t)));if(t.eq(U))return this.unsigned?C:O;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=O}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var n=Math.ceil(Math.log(e)/Math.LN2),o=n<=48?1:B(2,n-48),s=E(e),h=s.mul(t);h.isNegative()||h.gt(r);)h=(s=E(e-=o,this.unsigned)).mul(t);s.isZero()&&(s=z),i=i.add(s),r=r.sub(h)}return i},F.div=F.divide,F.modulo=function(t){return S(t)||(t=N(t)),w?I((this.unsigned?w.rem_u:w.rem_s)(this.low,this.high,t.low,t.high),w.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},F.mod=F.modulo,F.rem=F.modulo,F.not=function(){return I(~this.low,~this.high,this.unsigned)},F.and=function(t){return S(t)||(t=N(t)),I(this.low&t.low,this.high&t.high,this.unsigned)},F.or=function(t){return S(t)||(t=N(t)),I(this.low|t.low,this.high|t.high,this.unsigned)},F.xor=function(t){return S(t)||(t=N(t)),I(this.low^t.low,this.high^t.high,this.unsigned)},F.shiftLeft=function(t){return S(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?I(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):I(0,this.low<<t-32,this.unsigned)},F.shl=F.shiftLeft,F.shiftRight=function(t){return S(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?I(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):I(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},F.shr=F.shiftRight,F.shiftRightUnsigned=function(t){if(S(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?I(this.low>>>t|e<<32-t,e>>>t,this.unsigned):I(32===t?e:e>>>t-32,0,this.unsigned)},F.shru=F.shiftRightUnsigned,F.shr_u=F.shiftRightUnsigned,F.toSigned=function(){return this.unsigned?I(this.low,this.high,!1):this},F.toUnsigned=function(){return this.unsigned?this:I(this.low,this.high,!0)},F.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},F.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},F.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},M.fromBytes=function(t,e,r){return r?M.fromBytesLE(t,e):M.fromBytesBE(t,e)},M.fromBytesLE=function(t,e){return new M(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},M.fromBytesBE=function(t,e){return new M(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var $={},H=Y;function Y(t,e){if(!t)throw new Error(e||"Assertion failed")}Y.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var W={exports:{}},Z={exports:{}};"function"==typeof Object.create?Z.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Z.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};try{var J=require("util");if("function"!=typeof J.inherits)throw"";W.exports=J.inherits}catch(t){W.exports=Z.exports}var K=H,X=W.exports;function V(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function Q(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function tt(t){return 1===t.length?"0"+t:t}function et(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}$.inherits=X,$.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?r[i++]=o:o<2048?(r[i++]=o>>6|192,r[i++]=63&o|128):V(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),r[i++]=o>>18|240,r[i++]=o>>12&63|128,r[i++]=o>>6&63|128,r[i++]=63&o|128):(r[i++]=o>>12|224,r[i++]=o>>6&63|128,r[i++]=63&o|128)}else for(n=0;n<t.length;n++)r[n]=0|t[n];return r},$.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=tt(t[r].toString(16));return e},$.htonl=Q,$.toHex32=function(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];"little"===e&&(n=Q(n)),r+=et(n.toString(16))}return r},$.zero2=tt,$.zero8=et,$.join32=function(t,e,r,i){var n=r-e;K(n%4==0);for(var o=new Array(n/4),s=0,h=e;s<o.length;s++,h+=4){var u;u="big"===i?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],o[s]=u>>>0}return o},$.split32=function(t,e){for(var r=new Array(4*t.length),i=0,n=0;i<t.length;i++,n+=4){var o=t[i];"big"===e?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=255&o):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=255&o)}return r},$.rotr32=function(t,e){return t>>>e|t<<32-e},$.rotl32=function(t,e){return t<<e|t>>>32-e},$.sum32=function(t,e){return t+e>>>0},$.sum32_3=function(t,e,r){return t+e+r>>>0},$.sum32_4=function(t,e,r,i){return t+e+r+i>>>0},$.sum32_5=function(t,e,r,i,n){return t+e+r+i+n>>>0},$.sum64=function(t,e,r,i){var n=t[e],o=i+t[e+1]>>>0,s=(o<i?1:0)+r+n;t[e]=s>>>0,t[e+1]=o},$.sum64_hi=function(t,e,r,i){return(e+i>>>0<e?1:0)+t+r>>>0},$.sum64_lo=function(t,e,r,i){return e+i>>>0},$.sum64_4_hi=function(t,e,r,i,n,o,s,h){var u=0,a=e;return u+=(a=a+i>>>0)<e?1:0,u+=(a=a+o>>>0)<o?1:0,t+r+n+s+(u+=(a=a+h>>>0)<h?1:0)>>>0},$.sum64_4_lo=function(t,e,r,i,n,o,s,h){return e+i+o+h>>>0},$.sum64_5_hi=function(t,e,r,i,n,o,s,h,u,a){var f=0,d=e;return f+=(d=d+i>>>0)<e?1:0,f+=(d=d+o>>>0)<o?1:0,f+=(d=d+h>>>0)<h?1:0,t+r+n+s+u+(f+=(d=d+a>>>0)<a?1:0)>>>0},$.sum64_5_lo=function(t,e,r,i,n,o,s,h,u,a){return e+i+o+h+a>>>0},$.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},$.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},$.shr64_hi=function(t,e,r){return t>>>r},$.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0};var rt={},it=$,nt=H;function ot(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}rt.BlockHash=ot,ot.prototype.update=function(t,e){if(t=it.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=it.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},ot.prototype.digest=function(t){return this.update(this._pad()),nt(null===this.pending),this._digest(t)},ot.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=t>>>24&255,i[n++]=t>>>16&255,i[n++]=t>>>8&255,i[n++]=255&t}else for(i[n++]=255&t,i[n++]=t>>>8&255,i[n++]=t>>>16&255,i[n++]=t>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,o=8;o<this.padLength;o++)i[n++]=0;return i};var st={},ht=$.rotr32;function ut(t,e,r){return t&e^~t&r}function at(t,e,r){return t&e^t&r^e&r}function ft(t,e,r){return t^e^r}st.ft_1=function(t,e,r,i){return 0===t?ut(e,r,i):1===t||3===t?ft(e,r,i):2===t?at(e,r,i):void 0},st.ch32=ut,st.maj32=at,st.p32=ft,st.s0_256=function(t){return ht(t,2)^ht(t,13)^ht(t,22)},st.s1_256=function(t){return ht(t,6)^ht(t,11)^ht(t,25)},st.g0_256=function(t){return ht(t,7)^ht(t,18)^t>>>3},st.g1_256=function(t){return ht(t,17)^ht(t,19)^t>>>10};var dt=$,lt=rt,ct=st,pt=H,mt=dt.sum32,gt=dt.sum32_4,vt=dt.sum32_5,yt=ct.ch32,bt=ct.maj32,wt=ct.s0_256,Mt=ct.s1_256,St=ct.g0_256,At=ct.g1_256,_t=lt.BlockHash,xt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Et(){if(!(this instanceof Et))return new Et;_t.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=xt,this.W=new Array(64)}dt.inherits(Et,_t);var It,Bt=Et;function Tt(t){return String(t).toLowerCase().replace("0x","")}Et.blockSize=512,Et.outSize=256,Et.hmacStrength=192,Et.padLength=64,Et.prototype._update=function(t,e){for(var r=this.W,i=0;i<16;i++)r[i]=t[e+i];for(;i<r.length;i++)r[i]=gt(At(r[i-2]),r[i-7],St(r[i-15]),r[i-16]);var n=this.h[0],o=this.h[1],s=this.h[2],h=this.h[3],u=this.h[4],a=this.h[5],f=this.h[6],d=this.h[7];for(pt(this.k.length===r.length),i=0;i<r.length;i++){var l=vt(d,Mt(u),yt(u,a,f),this.k[i],r[i]),c=mt(wt(n),bt(n,o,s));d=f,f=a,a=u,u=mt(h,l),h=s,s=o,o=n,n=mt(l,c)}this.h[0]=mt(this.h[0],n),this.h[1]=mt(this.h[1],o),this.h[2]=mt(this.h[2],s),this.h[3]=mt(this.h[3],h),this.h[4]=mt(this.h[4],u),this.h[5]=mt(this.h[5],a),this.h[6]=mt(this.h[6],f),this.h[7]=mt(this.h[7],d)},Et.prototype._digest=function(t){return"hex"===t?dt.toHex32(this.h,"big"):dt.split32(this.h,"big")},function(t){t.WalletNotReady="Wallet is not sync.",t.IncorrectPassword="Incorect password",t.WalletNotEnabled="Wallet is not enabled.",t.IncorrectType="Incorect params type",t.IncorrectFormat="Incorect address format",t.IncorrectKey="Incorrect Key.",t.InvalidEntropy="Invalid entropy.",t.WordListRequired="Word list is required.",t.RequestFailed="Something Wrong with node.",t.BadPrivateKey="Bad private key.",t.BadPubKey="Bad public key.",t.IsNotSecureRNG="No secure random number generator available.",t.Base16NotValid="is not a valid base 16 address.",t.CannotConvertBytes="Could not convert byte Buffer to 5-bit Buffer.",t.InvalidBech32="Invalid bech32 address.",t.ExpectedHRP="Expected hrp to be zil.",t.InvalidMnemonicChecksum="Invalid mnemonic checksum",t.BytesAandBIncorrect="Both a and b must be 16 bits or less.",t.PrivateKeyMustBe="Private key must be 32 bytes.",t.PublicKeyMustBe="Public key must be 33 or 65 bytes.",t.CouldNotDeriveHardened="Could not derive hardened child key",t.Scam="Scam detected.",t.IncorrectMnemonic="Invalid mnemonic.",t.ShouldBeNumber="should be number",t.MustBeUnique="Address must be unique.",t.MustBe="must be unique.",t.MustBeObject="Must be object.",t.MustBeString="Must be string.",t.RequiredParam="is required.",t.OutOfIndex="Out of index.",t.IncorrectParams="Incorrect argument",t.SSnAllowNet="SSn list allow on mainnet only.",t.CannotExportLedger="Cannot export privateKey from ledger.",t.HightNonce="nonce too hight",t.Disabled="ZilPay is disabled.",t.Connect="User is't connections.",t.Rejected="Rejected by user",t.WebHidNotSupported="WEBHID is not supported.",t.NoFoundDeviced="No one device connected",t.CannotBeZero="A param cannot be zero."}(It||(It={}));const Nt=(t,e)=>Boolean(Tt(t).match(`^[0-9a-fA-F]{${e}}$`)),Rt=t=>{if(!Nt(t,40))throw new Error(It.Base16NotValid)},Pt=t=>{Rt(t),t=Tt(t);const e=Bt().update(t,"hex").digest("hex"),r=new y(e,"hex","be");let i="0x";for(let e=0;e<t.length;e++)-1!=="0123456789".indexOf(t[e])?i+=t[e]:i+=r.and(new y(2).pow(new y(255-6*e))).gte(new y(1))?t[e].toUpperCase():t[e].toLowerCase();return i},kt={isAddress:t=>Nt(String(t),40),isBech32:t=>!!String(t).match(/^zil1[qpzry9x8gf2tvdw0s3jn54khce6mua7l]{38}$/),isBN:t=>y.isBN(t),isLong:t=>b.isLong(t)},qt={Li:BigInt("1"),Qa:BigInt("1000000"),Zil:BigInt("1000000000000")};const Ot={BN:y,Long:b,validation:kt,units:{Units:qt,fromQa:function(t,e){const r=BigInt(t);return String(r/e)},toQa:function(t,e){const r=BigInt(t);return String(r*e)}}};function Ct(){return[...Array(20)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}var zt,Lt,Gt;!function(t){t.GetNetworkId="GetNetworkId",t.GetBlockchainInfo="GetBlockchainInfo",t.GetShardingStructure="GetShardingStructure",t.GetDSBlock="GetDsBlock",t.GetLatestDSBlock="GetLatestDsBlock",t.GetNumDSBlocks="GetNumDSBlocks",t.GetDSBlockRate="GetDSBlockRate",t.DSBlockListing="DSBlockListing",t.GetTxBlock="GetTxBlock",t.GetLatestTxBlock="GetLatestTxBlock",t.GetNumTxBlocks="GetNumTxBlocks",t.GetTxBlockRate="GetTxBlockRate",t.TxBlockListing="TxBlockListing",t.GetNumTransactions="GetNumTransactions",t.GetTransactionRate="GetTransactionRate",t.GetCurrentMiniEpoch="GetCurrentMiniEpoch",t.GetCurrentDSEpoch="GetCurrentDSEpoch",t.GetPrevDifficulty="GetPrevDifficulty",t.GetPrevDSDifficulty="GetPrevDSDifficulty",t.GetTotalCoinSupply="GetTotalCoinSupply",t.GetMinerInfo="GetMinerInfo",t.CreateTransaction="CreateTransaction",t.GetTransaction="GetTransaction",t.GetTransactionStatus="GetTransactionStatus",t.GetRecentTransactions="GetRecentTransactions",t.GetTransactionsForTxBlock="GetTransactionsForTxBlock",t.GetTransactionsForTxBlockEx="GetTransactionsForTxBlockEx",t.GetTxnBodiesForTxBlock="GetTxnBodiesForTxBlock",t.GetTxnBodiesForTxBlockEx="GetTxnBodiesForTxBlockEx",t.GetNumTxnsTxEpoch="GetNumTxnsTxEpoch",t.GetNumTxnsDSEpoch="GetNumTxnsDSEpoch",t.GetMinimumGasPrice="GetMinimumGasPrice",t.GetContractAddressFromTransactionID="GetContractAddressFromTransactionID",t.GetSmartContracts="GetSmartContracts",t.GetSmartContractCode="GetSmartContractCode",t.GetSmartContractInit="GetSmartContractInit",t.GetSmartContractState="GetSmartContractState",t.GetSmartContractSubState="GetSmartContractSubState",t.GetStateProof="GetStateProof",t.GetBalance="GetBalance",t.GetPendingTxn="GetPendingTxn",t.GetPendingTxns="GetPendingTxns"}(zt||(zt={}));class Dt{constructor(t,e){Lt.set(this,void 0),Gt.set(this,void 0),this.RPCMethod=zt,this.middleware={request:{use(){}},response:{use(){}}},o(this,Lt,t,"f"),o(this,Gt,e,"f")}send(t,...e){const o=i.CONTENT_PROXY_MEHTOD,s=r.CONTENT,h=Ct();return new m({type:o,payload:{params:e,method:t,uuid:h}}).send(n(this,Lt,"f"),s),new Promise(((t,e)=>{const r=n(this,Gt,"f").on((n=>{if(n.type===i.CONTENT_PROXY_RESULT&&n.payload&&n.payload.uuid&&n.payload.uuid===h)return n.payload&&n.payload.error?(r(),e(new Error(n.payload.error.message||n.payload.error))):(delete n.payload.uuid,r(),t(n.payload))}))}))}}Lt=new WeakMap,Gt=new WeakMap;var jt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ut=[],Ft=[],$t="undefined"!=typeof Uint8Array?Uint8Array:Array,Ht=!1;function Yt(){Ht=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Ut[e]=t[e],Ft[t.charCodeAt(e)]=e;Ft["-".charCodeAt(0)]=62,Ft["_".charCodeAt(0)]=63}function Wt(t,e,r){for(var i,n,o=[],s=e;s<r;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(Ut[(n=i)>>18&63]+Ut[n>>12&63]+Ut[n>>6&63]+Ut[63&n]);return o.join("")}function Zt(t){var e;Ht||Yt();for(var r=t.length,i=r%3,n="",o=[],s=16383,h=0,u=r-i;h<u;h+=s)o.push(Wt(t,h,h+s>u?u:h+s));return 1===i?(e=t[r-1],n+=Ut[e>>2],n+=Ut[e<<4&63],n+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],n+=Ut[e>>10],n+=Ut[e>>4&63],n+=Ut[e<<2&63],n+="="),o.push(n),o.join("")}function Jt(t,e,r,i,n){var o,s,h=8*n-i-1,u=(1<<h)-1,a=u>>1,f=-7,d=r?n-1:0,l=r?-1:1,c=t[e+d];for(d+=l,o=c&(1<<-f)-1,c>>=-f,f+=h;f>0;o=256*o+t[e+d],d+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+t[e+d],d+=l,f-=8);if(0===o)o=1-a;else{if(o===u)return s?NaN:1/0*(c?-1:1);s+=Math.pow(2,i),o-=a}return(c?-1:1)*s*Math.pow(2,o-i)}function Kt(t,e,r,i,n,o){var s,h,u,a=8*o-n-1,f=(1<<a)-1,d=f>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+d>=1?l/u:l*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=f?(h=0,s=f):s+d>=1?(h=(e*u-1)*Math.pow(2,n),s+=d):(h=e*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;t[r+c]=255&h,c+=p,h/=256,n-=8);for(s=s<<n|h,a+=n;a>0;t[r+c]=255&s,c+=p,s/=256,a-=8);t[r+c-p]|=128*m}var Xt={}.toString,Vt=Array.isArray||function(t){return"[object Array]"==Xt.call(t)};function Qt(){return ee.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function te(t,e){if(Qt()<e)throw new RangeError("Invalid typed array length");return ee.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ee.prototype:(null===t&&(t=new ee(e)),t.length=e),t}function ee(t,e,r){if(!(ee.TYPED_ARRAY_SUPPORT||this instanceof ee))return new ee(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return ne(this,t)}return re(this,t,e,r)}function re(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);ee.TYPED_ARRAY_SUPPORT?(t=e).__proto__=ee.prototype:t=oe(t,e);return t}(t,e,r,i):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!ee.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|ue(e,r),n=(t=te(t,i)).write(e,r);n!==i&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(he(e)){var r=0|se(e.length);return 0===(t=te(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?te(t,0):oe(t,e);if("Buffer"===e.type&&Vt(e.data))return oe(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function ie(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function ne(t,e){if(ie(e),t=te(t,e<0?0:0|se(e)),!ee.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function oe(t,e){var r=e.length<0?0:0|se(e.length);t=te(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function se(t){if(t>=Qt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qt().toString(16)+" bytes");return 0|t}function he(t){return!(null==t||!t._isBuffer)}function ue(t,e){if(he(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Oe(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Ce(t).length;default:if(i)return Oe(t).length;e=(""+e).toLowerCase(),i=!0}}function ae(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return _e(this,e,r);case"utf8":case"utf-8":return we(this,e,r);case"ascii":return Se(this,e,r);case"latin1":case"binary":return Ae(this,e,r);case"base64":return be(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function fe(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function de(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=ee.from(e,i)),he(e))return 0===e.length?-1:le(t,e,r,i,n);if("number"==typeof e)return e&=255,ee.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):le(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function le(t,e,r,i,n){var o,s=1,h=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,h/=2,u/=2,r/=2}function a(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var f=-1;for(o=r;o<h;o++)if(a(t,o)===a(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(r+u>h&&(r=h-u),o=r;o>=0;o--){for(var d=!0,l=0;l<u;l++)if(a(t,o+l)!==a(e,l)){d=!1;break}if(d)return o}return-1}function ce(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var h=parseInt(e.substr(2*s,2),16);if(isNaN(h))return s;t[r+s]=h}return s}function pe(t,e,r,i){return ze(Oe(e,t.length-r),t,r,i)}function me(t,e,r,i){return ze(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function ge(t,e,r,i){return me(t,e,r,i)}function ve(t,e,r,i){return ze(Ce(e),t,r,i)}function ye(t,e,r,i){return ze(function(t,e){for(var r,i,n,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(r=t.charCodeAt(s))>>8,n=r%256,o.push(n),o.push(i);return o}(e,t.length-r),t,r,i)}function be(t,e,r){return 0===e&&r===t.length?Zt(t):Zt(t.slice(e,r))}function we(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o,s,h,u,a=t[n],f=null,d=a>239?4:a>223?3:a>191?2:1;if(n+d<=r)switch(d){case 1:a<128&&(f=a);break;case 2:128==(192&(o=t[n+1]))&&(u=(31&a)<<6|63&o)>127&&(f=u);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&(u=(15&a)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[n+1],s=t[n+2],h=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&h)&&(u=(15&a)<<18|(63&o)<<12|(63&s)<<6|63&h)>65535&&u<1114112&&(f=u)}null===f?(f=65533,d=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),n+=d}return function(t){var e=t.length;if(e<=Me)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Me));return r}(i)}ee.TYPED_ARRAY_SUPPORT=void 0===jt.TYPED_ARRAY_SUPPORT||jt.TYPED_ARRAY_SUPPORT,ee.poolSize=8192,ee._augment=function(t){return t.__proto__=ee.prototype,t},ee.from=function(t,e,r){return re(null,t,e,r)},ee.TYPED_ARRAY_SUPPORT&&(ee.prototype.__proto__=Uint8Array.prototype,ee.__proto__=Uint8Array),ee.alloc=function(t,e,r){return function(t,e,r,i){return ie(e),e<=0?te(t,e):void 0!==r?"string"==typeof i?te(t,e).fill(r,i):te(t,e).fill(r):te(t,e)}(null,t,e,r)},ee.allocUnsafe=function(t){return ne(null,t)},ee.allocUnsafeSlow=function(t){return ne(null,t)},ee.isBuffer=Le,ee.compare=function(t,e){if(!he(t)||!he(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},ee.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ee.concat=function(t,e){if(!Vt(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ee.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=ee.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var o=t[r];if(!he(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},ee.byteLength=ue,ee.prototype._isBuffer=!0,ee.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)fe(this,e,e+1);return this},ee.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)fe(this,e,e+3),fe(this,e+1,e+2);return this},ee.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)fe(this,e,e+7),fe(this,e+1,e+6),fe(this,e+2,e+5),fe(this,e+3,e+4);return this},ee.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?we(this,0,t):ae.apply(this,arguments)},ee.prototype.equals=function(t){if(!he(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ee.compare(this,t)},ee.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ee.prototype.compare=function(t,e,r,i,n){if(!he(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(e>>>=0),h=Math.min(o,s),u=this.slice(i,n),a=t.slice(e,r),f=0;f<h;++f)if(u[f]!==a[f]){o=u[f],s=a[f];break}return o<s?-1:s<o?1:0},ee.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},ee.prototype.indexOf=function(t,e,r){return de(this,t,e,r,!0)},ee.prototype.lastIndexOf=function(t,e,r){return de(this,t,e,r,!1)},ee.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return ce(this,t,e,r);case"utf8":case"utf-8":return pe(this,t,e,r);case"ascii":return me(this,t,e,r);case"latin1":case"binary":return ge(this,t,e,r);case"base64":return ve(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Me=4096;function Se(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function Ae(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function _e(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=e;o<r;++o)n+=qe(t[o]);return n}function xe(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function Ee(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function Ie(t,e,r,i,n,o){if(!he(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function Be(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function Te(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function Ne(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Re(t,e,r,i,n){return n||Ne(t,0,r,4),Kt(t,e,r,i,23,4),r+4}function Pe(t,e,r,i,n){return n||Ne(t,0,r,8),Kt(t,e,r,i,52,8),r+8}ee.prototype.slice=function(t,e){var r,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),ee.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=ee.prototype;else{var n=e-t;r=new ee(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+t]}return r},ee.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Ee(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i},ee.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Ee(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},ee.prototype.readUInt8=function(t,e){return e||Ee(t,1,this.length),this[t]},ee.prototype.readUInt16LE=function(t,e){return e||Ee(t,2,this.length),this[t]|this[t+1]<<8},ee.prototype.readUInt16BE=function(t,e){return e||Ee(t,2,this.length),this[t]<<8|this[t+1]},ee.prototype.readUInt32LE=function(t,e){return e||Ee(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ee.prototype.readUInt32BE=function(t,e){return e||Ee(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ee.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Ee(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},ee.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Ee(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},ee.prototype.readInt8=function(t,e){return e||Ee(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ee.prototype.readInt16LE=function(t,e){e||Ee(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ee.prototype.readInt16BE=function(t,e){e||Ee(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ee.prototype.readInt32LE=function(t,e){return e||Ee(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ee.prototype.readInt32BE=function(t,e){return e||Ee(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ee.prototype.readFloatLE=function(t,e){return e||Ee(t,4,this.length),Jt(this,t,!0,23,4)},ee.prototype.readFloatBE=function(t,e){return e||Ee(t,4,this.length),Jt(this,t,!1,23,4)},ee.prototype.readDoubleLE=function(t,e){return e||Ee(t,8,this.length),Jt(this,t,!0,52,8)},ee.prototype.readDoubleBE=function(t,e){return e||Ee(t,8,this.length),Jt(this,t,!1,52,8)},ee.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||Ie(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},ee.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||Ie(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+r},ee.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,1,255,0),ee.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ee.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,2,65535,0),ee.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Be(this,t,e,!0),e+2},ee.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,2,65535,0),ee.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Be(this,t,e,!1),e+2},ee.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,4,4294967295,0),ee.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Te(this,t,e,!0),e+4},ee.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,4,4294967295,0),ee.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Te(this,t,e,!1),e+4},ee.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);Ie(this,t,e,r,n-1,-n)}var o=0,s=1,h=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===h&&0!==this[e+o-1]&&(h=1),this[e+o]=(t/s>>0)-h&255;return e+r},ee.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);Ie(this,t,e,r,n-1,-n)}var o=r-1,s=1,h=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===h&&0!==this[e+o+1]&&(h=1),this[e+o]=(t/s>>0)-h&255;return e+r},ee.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,1,127,-128),ee.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ee.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,2,32767,-32768),ee.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Be(this,t,e,!0),e+2},ee.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,2,32767,-32768),ee.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Be(this,t,e,!1),e+2},ee.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,4,2147483647,-2147483648),ee.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Te(this,t,e,!0),e+4},ee.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||Ie(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ee.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Te(this,t,e,!1),e+4},ee.prototype.writeFloatLE=function(t,e,r){return Re(this,t,e,!0,r)},ee.prototype.writeFloatBE=function(t,e,r){return Re(this,t,e,!1,r)},ee.prototype.writeDoubleLE=function(t,e,r){return Pe(this,t,e,!0,r)},ee.prototype.writeDoubleBE=function(t,e,r){return Pe(this,t,e,!1,r)},ee.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,o=i-r;if(this===t&&r<e&&e<i)for(n=o-1;n>=0;--n)t[n+e]=this[n+r];else if(o<1e3||!ee.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},ee.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!ee.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=he(t)?t:Oe(new ee(t,i).toString()),h=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%h]}return this};var ke=/[^+\/0-9A-Za-z-_]/g;function qe(t){return t<16?"0"+t.toString(16):t.toString(16)}function Oe(t,e){var r;e=e||1/0;for(var i=t.length,n=null,o=[],s=0;s<i;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Ce(t){return function(t){var e,r,i,n,o,s;Ht||Yt();var h=t.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[h-2]?2:"="===t[h-1]?1:0,s=new $t(3*h/4-o),i=o>0?h-4:h;var u=0;for(e=0,r=0;e<i;e+=4,r+=3)n=Ft[t.charCodeAt(e)]<<18|Ft[t.charCodeAt(e+1)]<<12|Ft[t.charCodeAt(e+2)]<<6|Ft[t.charCodeAt(e+3)],s[u++]=n>>16&255,s[u++]=n>>8&255,s[u++]=255&n;return 2===o?(n=Ft[t.charCodeAt(e)]<<2|Ft[t.charCodeAt(e+1)]>>4,s[u++]=255&n):1===o&&(n=Ft[t.charCodeAt(e)]<<10|Ft[t.charCodeAt(e+1)]<<4|Ft[t.charCodeAt(e+2)]>>2,s[u++]=n>>8&255,s[u++]=255&n),s}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(ke,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function ze(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Le(t){return null!=t&&(!!t._isBuffer||Ge(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Ge(t.slice(0,0))}(t))}function Ge(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var De={},je={},Ue=$,Fe=rt,$e=st,He=Ue.rotl32,Ye=Ue.sum32,We=Ue.sum32_5,Ze=$e.ft_1,Je=Fe.BlockHash,Ke=[1518500249,1859775393,2400959708,3395469782];function Xe(){if(!(this instanceof Xe))return new Xe;Je.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ue.inherits(Xe,Je);var Ve=Xe;Xe.blockSize=512,Xe.outSize=160,Xe.hmacStrength=80,Xe.padLength=64,Xe.prototype._update=function(t,e){for(var r=this.W,i=0;i<16;i++)r[i]=t[e+i];for(;i<r.length;i++)r[i]=He(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],o=this.h[1],s=this.h[2],h=this.h[3],u=this.h[4];for(i=0;i<r.length;i++){var a=~~(i/20),f=We(He(n,5),Ze(a,o,s,h),u,r[i],Ke[a]);u=h,h=s,s=He(o,30),o=n,n=f}this.h[0]=Ye(this.h[0],n),this.h[1]=Ye(this.h[1],o),this.h[2]=Ye(this.h[2],s),this.h[3]=Ye(this.h[3],h),this.h[4]=Ye(this.h[4],u)},Xe.prototype._digest=function(t){return"hex"===t?Ue.toHex32(this.h,"big"):Ue.split32(this.h,"big")};var Qe=$,tr=Bt;function er(){if(!(this instanceof er))return new er;tr.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Qe.inherits(er,tr);var rr=er;er.blockSize=512,er.outSize=224,er.hmacStrength=192,er.padLength=64,er.prototype._digest=function(t){return"hex"===t?Qe.toHex32(this.h.slice(0,7),"big"):Qe.split32(this.h.slice(0,7),"big")};var ir=$,nr=rt,or=H,sr=ir.rotr64_hi,hr=ir.rotr64_lo,ur=ir.shr64_hi,ar=ir.shr64_lo,fr=ir.sum64,dr=ir.sum64_hi,lr=ir.sum64_lo,cr=ir.sum64_4_hi,pr=ir.sum64_4_lo,mr=ir.sum64_5_hi,gr=ir.sum64_5_lo,vr=nr.BlockHash,yr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function br(){if(!(this instanceof br))return new br;vr.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=yr,this.W=new Array(160)}ir.inherits(br,vr);var wr=br;function Mr(t,e,r,i,n){var o=t&r^~t&n;return o<0&&(o+=4294967296),o}function Sr(t,e,r,i,n,o){var s=e&i^~e&o;return s<0&&(s+=4294967296),s}function Ar(t,e,r,i,n){var o=t&r^t&n^r&n;return o<0&&(o+=4294967296),o}function _r(t,e,r,i,n,o){var s=e&i^e&o^i&o;return s<0&&(s+=4294967296),s}function xr(t,e){var r=sr(t,e,28)^sr(e,t,2)^sr(e,t,7);return r<0&&(r+=4294967296),r}function Er(t,e){var r=hr(t,e,28)^hr(e,t,2)^hr(e,t,7);return r<0&&(r+=4294967296),r}function Ir(t,e){var r=sr(t,e,14)^sr(t,e,18)^sr(e,t,9);return r<0&&(r+=4294967296),r}function Br(t,e){var r=hr(t,e,14)^hr(t,e,18)^hr(e,t,9);return r<0&&(r+=4294967296),r}function Tr(t,e){var r=sr(t,e,1)^sr(t,e,8)^ur(t,e,7);return r<0&&(r+=4294967296),r}function Nr(t,e){var r=hr(t,e,1)^hr(t,e,8)^ar(t,e,7);return r<0&&(r+=4294967296),r}function Rr(t,e){var r=sr(t,e,19)^sr(e,t,29)^ur(t,e,6);return r<0&&(r+=4294967296),r}function Pr(t,e){var r=hr(t,e,19)^hr(e,t,29)^ar(t,e,6);return r<0&&(r+=4294967296),r}br.blockSize=1024,br.outSize=512,br.hmacStrength=192,br.padLength=128,br.prototype._prepareBlock=function(t,e){for(var r=this.W,i=0;i<32;i++)r[i]=t[e+i];for(;i<r.length;i+=2){var n=Rr(r[i-4],r[i-3]),o=Pr(r[i-4],r[i-3]),s=r[i-14],h=r[i-13],u=Tr(r[i-30],r[i-29]),a=Nr(r[i-30],r[i-29]),f=r[i-32],d=r[i-31];r[i]=cr(n,o,s,h,u,a,f,d),r[i+1]=pr(n,o,s,h,u,a,f,d)}},br.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,i=this.h[0],n=this.h[1],o=this.h[2],s=this.h[3],h=this.h[4],u=this.h[5],a=this.h[6],f=this.h[7],d=this.h[8],l=this.h[9],c=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],v=this.h[14],y=this.h[15];or(this.k.length===r.length);for(var b=0;b<r.length;b+=2){var w=v,M=y,S=Ir(d,l),A=Br(d,l),_=Mr(d,l,c,p,m),x=Sr(d,l,c,p,m,g),E=this.k[b],I=this.k[b+1],B=r[b],T=r[b+1],N=mr(w,M,S,A,_,x,E,I,B,T),R=gr(w,M,S,A,_,x,E,I,B,T);w=xr(i,n),M=Er(i,n),S=Ar(i,n,o,s,h),A=_r(i,n,o,s,h,u);var P=dr(w,M,S,A),k=lr(w,M,S,A);v=m,y=g,m=c,g=p,c=d,p=l,d=dr(a,f,N,R),l=lr(f,f,N,R),a=h,f=u,h=o,u=s,o=i,s=n,i=dr(N,R,P,k),n=lr(N,R,P,k)}fr(this.h,0,i,n),fr(this.h,2,o,s),fr(this.h,4,h,u),fr(this.h,6,a,f),fr(this.h,8,d,l),fr(this.h,10,c,p),fr(this.h,12,m,g),fr(this.h,14,v,y)},br.prototype._digest=function(t){return"hex"===t?ir.toHex32(this.h,"big"):ir.split32(this.h,"big")};var kr=$,qr=wr;function Or(){if(!(this instanceof Or))return new Or;qr.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}kr.inherits(Or,qr);var Cr=Or;Or.blockSize=1024,Or.outSize=384,Or.hmacStrength=192,Or.padLength=128,Or.prototype._digest=function(t){return"hex"===t?kr.toHex32(this.h.slice(0,12),"big"):kr.split32(this.h.slice(0,12),"big")},je.sha1=Ve,je.sha224=rr,je.sha256=Bt,je.sha384=Cr,je.sha512=wr;var zr={},Lr=$,Gr=rt,Dr=Lr.rotl32,jr=Lr.sum32,Ur=Lr.sum32_3,Fr=Lr.sum32_4,$r=Gr.BlockHash;function Hr(){if(!(this instanceof Hr))return new Hr;$r.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Yr(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function Wr(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Zr(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}Lr.inherits(Hr,$r),zr.ripemd160=Hr,Hr.blockSize=512,Hr.outSize=160,Hr.hmacStrength=192,Hr.padLength=64,Hr.prototype._update=function(t,e){for(var r=this.h[0],i=this.h[1],n=this.h[2],o=this.h[3],s=this.h[4],h=r,u=i,a=n,f=o,d=s,l=0;l<80;l++){var c=jr(Dr(Fr(r,Yr(l,i,n,o),t[Jr[l]+e],Wr(l)),Xr[l]),s);r=s,s=o,o=Dr(n,10),n=i,i=c,c=jr(Dr(Fr(h,Yr(79-l,u,a,f),t[Kr[l]+e],Zr(l)),Vr[l]),d),h=d,d=f,f=Dr(a,10),a=u,u=c}c=Ur(this.h[1],n,f),this.h[1]=Ur(this.h[2],o,d),this.h[2]=Ur(this.h[3],s,h),this.h[3]=Ur(this.h[4],r,u),this.h[4]=Ur(this.h[0],i,a),this.h[0]=c},Hr.prototype._digest=function(t){return"hex"===t?Lr.toHex32(this.h,"little"):Lr.split32(this.h,"little")};var Jr=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Kr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Xr=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Vr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Qr=$,ti=H;function ei(t,e,r){if(!(this instanceof ei))return new ei(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Qr.toArray(e,r))}var ri=ei;ei.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),ti(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},ei.prototype.update=function(t,e){return this.inner.update(t,e),this},ei.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=t;e.utils=$,e.common=rt,e.sha=je,e.ripemd=zr,e.hmac=ri,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(De);var ii={};!function(t){var e=t;function r(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",i=0;i<t.length;i++)e+=r(t[i].toString(16));return e}e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var i=0;i<t.length;i++)r[i]=0|t[i];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(i=0;i<t.length;i++){var n=t.charCodeAt(i),o=n>>8,s=255&n;o?r.push(o,s):r.push(s)}return r},e.zero2=r,e.toHex=i,e.encode=function(t,e){return"hex"===e?i(t):t}}(ii);var ni=De,oi=ii,si=H;function hi(t){if(!(this instanceof hi))return new hi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=oi.toArray(t.entropy,t.entropyEnc||"hex"),r=oi.toArray(t.nonce,t.nonceEnc||"hex"),i=oi.toArray(t.pers,t.persEnc||"hex");si(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var ui=hi;hi.prototype._init=function(t,e,r){var i=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},hi.prototype._hmac=function(){return new ni.hmac(this.hash,this.K)},hi.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},hi.prototype.reseed=function(t,e,r,i){"string"!=typeof e&&(i=r,r=e,e=null),t=oi.toArray(t,e),r=oi.toArray(r,i),si(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},hi.prototype.generate=function(t,e,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(i=r,r=e,e=null),r&&(r=oi.toArray(r,i||"hex"),this._update(r));for(var n=[];n.length<t;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,t);return this._update(r),this._reseed++,oi.encode(o,e)};var ai={};!function(t){var e=t,r=v.exports,i=H,n=ii;e.assert=i,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode,e.getNAF=function(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1);i.fill(0);for(var n=1<<e+1,o=t.clone(),s=0;s<i.length;s++){var h,u=o.andln(n-1);o.isOdd()?(h=u>(n>>1)-1?(n>>1)-u:u,o.isubn(h)):h=0,i[s]=h,o.iushrn(1)}return i},e.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i,n=0,o=0;t.cmpn(-n)>0||e.cmpn(-o)>0;){var s,h,u=t.andln(3)+n&3,a=e.andln(3)+o&3;3===u&&(u=-1),3===a&&(a=-1),s=0==(1&u)?0:3!==(i=t.andln(7)+n&7)&&5!==i||2!==a?u:-u,r[0].push(s),h=0==(1&a)?0:3!==(i=e.andln(7)+o&7)&&5!==i||2!==u?a:-a,r[1].push(h),2*n===s+1&&(n=1-n),2*o===h+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},e.cachedProperty=function(t,e,r){var i="_"+e;t.prototype[e]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},e.parseBytes=function(t){return"string"==typeof t?e.toArray(t,"hex"):t},e.intFromLE=function(t){return new r(t,"hex","le")}}(ai);var fi={},di={},li=v.exports,ci=ai,pi=ci.getNAF,mi=ci.getJSF,gi=ci.assert;function vi(t,e){this.type=t,this.p=new li(e.p,16),this.red=e.prime?li.red(e.prime):li.mont(this.p),this.zero=new li(0).toRed(this.red),this.one=new li(1).toRed(this.red),this.two=new li(2).toRed(this.red),this.n=e.n&&new li(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var yi=vi;function bi(t,e){this.curve=t,this.type=e,this.precomputed=null}vi.prototype.point=function(){throw new Error("Not implemented")},vi.prototype.validate=function(){throw new Error("Not implemented")},vi.prototype._fixedNafMul=function(t,e){gi(t.precomputed);var r=t._getDoubles(),i=pi(e,1,this._bitLength),n=(1<<r.step+1)-(r.step%2==0?2:1);n/=3;var o,s,h=[];for(o=0;o<i.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+i[u];h.push(s)}for(var a=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=n;d>0;d--){for(o=0;o<h.length;o++)(s=h[o])===d?f=f.mixedAdd(r.points[o]):s===-d&&(f=f.mixedAdd(r.points[o].neg()));a=a.add(f)}return a.toP()},vi.prototype._wnafMul=function(t,e){var r=4,i=t._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=pi(e,r,this._bitLength),s=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var u=0;h>=0&&0===o[h];h--)u++;if(h>=0&&u++,s=s.dblp(u),h<0)break;var a=o[h];gi(0!==a),s="affine"===t.type?a>0?s.mixedAdd(n[a-1>>1]):s.mixedAdd(n[-a-1>>1].neg()):a>0?s.add(n[a-1>>1]):s.add(n[-a-1>>1].neg())}return"affine"===t.type?s.toP():s},vi.prototype._wnafMulAdd=function(t,e,r,i,n){var o,s,h,u=this._wnafT1,a=this._wnafT2,f=this._wnafT3,d=0;for(o=0;o<i;o++){var l=(h=e[o])._getNAFPoints(t);u[o]=l.wnd,a[o]=l.points}for(o=i-1;o>=1;o-=2){var c=o-1,p=o;if(1===u[c]&&1===u[p]){var m=[e[c],null,null,e[p]];0===e[c].y.cmp(e[p].y)?(m[1]=e[c].add(e[p]),m[2]=e[c].toJ().mixedAdd(e[p].neg())):0===e[c].y.cmp(e[p].y.redNeg())?(m[1]=e[c].toJ().mixedAdd(e[p]),m[2]=e[c].add(e[p].neg())):(m[1]=e[c].toJ().mixedAdd(e[p]),m[2]=e[c].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=mi(r[c],r[p]);for(d=Math.max(v[0].length,d),f[c]=new Array(d),f[p]=new Array(d),s=0;s<d;s++){var y=0|v[0][s],b=0|v[1][s];f[c][s]=g[3*(y+1)+(b+1)],f[p][s]=0,a[c]=m}}else f[c]=pi(r[c],u[c],this._bitLength),f[p]=pi(r[p],u[p],this._bitLength),d=Math.max(f[c].length,d),d=Math.max(f[p].length,d)}var w=this.jpoint(null,null,null),M=this._wnafT4;for(o=d;o>=0;o--){for(var S=0;o>=0;){var A=!0;for(s=0;s<i;s++)M[s]=0|f[s][o],0!==M[s]&&(A=!1);if(!A)break;S++,o--}if(o>=0&&S++,w=w.dblp(S),o<0)break;for(s=0;s<i;s++){var _=M[s];0!==_&&(_>0?h=a[s][_-1>>1]:_<0&&(h=a[s][-_-1>>1].neg()),w="affine"===h.type?w.mixedAdd(h):w.add(h))}}for(o=0;o<i;o++)a[o]=null;return n?w:w.toP()},vi.BasePoint=bi,bi.prototype.eq=function(){throw new Error("Not implemented")},bi.prototype.validate=function(){return this.curve.validate(this)},vi.prototype.decodePoint=function(t,e){t=ci.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?gi(t[t.length-1]%2==0):7===t[0]&&gi(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},bi.prototype.encodeCompressed=function(t){return this.encode(t,!0)},bi.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},bi.prototype.encode=function(t,e){return ci.encode(this._encode(e),t)},bi.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},bi.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},bi.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<e;n+=t){for(var o=0;o<t;o++)i=i.dbl();r.push(i)}return{step:t,points:r}},bi.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)e[n]=e[n-1].add(i);return{wnd:t,points:e}},bi.prototype._getBeta=function(){return null},bi.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var wi=ai,Mi=v.exports,Si=W.exports,Ai=yi,_i=wi.assert;function xi(t){Ai.call(this,"short",t),this.a=new Mi(t.a,16).toRed(this.red),this.b=new Mi(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Si(xi,Ai);var Ei=xi;function Ii(t,e,r,i){Ai.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new Mi(e,16),this.y=new Mi(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Bi(t,e,r,i){Ai.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Mi(0)):(this.x=new Mi(e,16),this.y=new Mi(r,16),this.z=new Mi(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}xi.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new Mi(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=(e=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(t.lambda)r=new Mi(t.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))?r=n[0]:(r=n[1],_i(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new Mi(t.a,16),b:new Mi(t.b,16)}})):this._getEndoBasis(r)}}},xi.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:Mi.mont(t),r=new Mi(2).toRed(e).redInvm(),i=r.redNeg(),n=new Mi(3).toRed(e).redNeg().redSqrt().redMul(r);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},xi.prototype._getEndoBasis=function(t){for(var e,r,i,n,o,s,h,u,a,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=t,l=this.n.clone(),c=new Mi(1),p=new Mi(0),m=new Mi(0),g=new Mi(1),v=0;0!==d.cmpn(0);){var y=l.div(d);u=l.sub(y.mul(d)),a=m.sub(y.mul(c));var b=g.sub(y.mul(p));if(!i&&u.cmp(f)<0)e=h.neg(),r=c,i=u.neg(),n=a;else if(i&&2==++v)break;h=u,l=d,d=u,m=c,c=a,g=p,p=b}o=u.neg(),s=a;var w=i.sqr().add(n.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=e,s=r),i.negative&&(i=i.neg(),n=n.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:i,b:n},{a:o,b:s}]},xi.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],i=e[1],n=i.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=n.mul(r.a),h=o.mul(i.a),u=n.mul(r.b),a=o.mul(i.b);return{k1:t.sub(s).sub(h),k2:u.add(a).neg()}},xi.prototype.pointFromX=function(t,e){(t=new Mi(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(e&&!n||!e&&n)&&(i=i.redNeg()),this.point(t,i)},xi.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,i=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},xi.prototype._endoWnafMulAdd=function(t,e,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),h=t[o],u=h._getBeta();s.k1.negative&&(s.k1.ineg(),h=h.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),i[2*o]=h,i[2*o+1]=u,n[2*o]=s.k1,n[2*o+1]=s.k2}for(var a=this._wnafMulAdd(1,i,n,2*o,r),f=0;f<2*o;f++)i[f]=null,n[f]=null;return a},Si(Ii,Ai.BasePoint),xi.prototype.point=function(t,e,r){return new Ii(this,t,e,r)},xi.prototype.pointFromJSON=function(t,e){return Ii.fromJSON(this,t,e)},Ii.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,i=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}},Ii.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Ii.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],r);if(!e[2])return i;function n(e){return t.point(e[0],e[1],r)}var o=e[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},Ii.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Ii.prototype.isInfinity=function(){return this.inf},Ii.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),i=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},Ii.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),i=t.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Ii.prototype.getX=function(){return this.x.fromRed()},Ii.prototype.getY=function(){return this.y.fromRed()},Ii.prototype.mul=function(t){return t=new Mi(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Ii.prototype.mulAdd=function(t,e,r){var i=[this,e],n=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},Ii.prototype.jmulAdd=function(t,e,r){var i=[this,e],n=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},Ii.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Ii.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e},Ii.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Si(Bi,Ai.BasePoint),xi.prototype.jpoint=function(t,e,r){return new Bi(this,t,e,r)},Bi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),i=this.y.redMul(e).redMul(t);return this.curve.point(r,i)},Bi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Bi.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(e),n=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),h=i.redSub(n),u=o.redSub(s);if(0===h.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var a=h.redSqr(),f=a.redMul(h),d=i.redMul(a),l=u.redSqr().redIAdd(f).redISub(d).redISub(d),c=u.redMul(d.redISub(l)).redISub(o.redMul(f)),p=this.z.redMul(t.z).redMul(h);return this.curve.jpoint(l,c,p)},Bi.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,i=t.x.redMul(e),n=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(i),h=n.redSub(o);if(0===s.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),a=u.redMul(s),f=r.redMul(u),d=h.redSqr().redIAdd(a).redISub(f).redISub(f),l=h.redMul(f.redISub(d)).redISub(n.redMul(a)),c=this.z.redMul(s);return this.curve.jpoint(d,l,c)},Bi.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,o=this.x,s=this.y,h=this.z,u=h.redSqr().redSqr(),a=s.redAdd(s);for(e=0;e<t;e++){var f=o.redSqr(),d=a.redSqr(),l=d.redSqr(),c=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(u)),p=o.redMul(d),m=c.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=c.redMul(g);v=v.redIAdd(v).redISub(l);var y=a.redMul(h);e+1<t&&(u=u.redMul(l)),o=m,h=y,a=v}return this.curve.jpoint(o,a.redMul(n),h)},Bi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Bi.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var h=i.redAdd(i).redIAdd(i),u=h.redSqr().redISub(s).redISub(s),a=o.redIAdd(o);a=(a=a.redIAdd(a)).redIAdd(a),t=u,e=h.redMul(s.redISub(u)).redISub(a),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),l=d.redSqr(),c=this.x.redAdd(d).redSqr().redISub(f).redISub(l);c=c.redIAdd(c);var p=f.redAdd(f).redIAdd(f),m=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(c).redISub(c),e=p.redMul(c.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},Bi.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=h.redSqr().redISub(s).redISub(s);t=u;var a=o.redIAdd(o);a=(a=a.redIAdd(a)).redIAdd(a),e=h.redMul(s.redISub(u)).redISub(a),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),l=this.x.redMul(d),c=this.x.redSub(f).redMul(this.x.redAdd(f));c=c.redAdd(c).redIAdd(c);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);t=c.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=c.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},Bi.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),h=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(n)),u=e.redAdd(e),a=(u=u.redIAdd(u)).redMul(s),f=h.redSqr().redISub(a.redAdd(a)),d=a.redISub(f),l=s.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=h.redMul(d).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(f,c,p)},Bi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),i=e.redSqr(),n=t.redAdd(t).redIAdd(t),o=n.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(i),h=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=i.redIAdd(i);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var a=n.redIAdd(s).redSqr().redISub(o).redISub(h).redISub(u),f=e.redMul(a);f=(f=f.redIAdd(f)).redIAdd(f);var d=this.x.redMul(h).redISub(f);d=(d=d.redIAdd(d)).redIAdd(d);var l=this.y.redMul(a.redMul(u.redISub(a)).redISub(s.redMul(h)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=this.z.redAdd(s).redSqr().redISub(r).redISub(h);return this.curve.jpoint(d,l,c)},Bi.prototype.mul=function(t,e){return t=new Mi(t,e),this.curve._wnafMul(this,t)},Bi.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var i=e.redMul(this.z),n=r.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(i)).cmpn(0)},Bi.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var i=t.clone(),n=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},Bi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Bi.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Ti=v.exports,Ni=W.exports,Ri=yi,Pi=ai;function ki(t){Ri.call(this,"mont",t),this.a=new Ti(t.a,16).toRed(this.red),this.b=new Ti(t.b,16).toRed(this.red),this.i4=new Ti(4).toRed(this.red).redInvm(),this.two=new Ti(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Ni(ki,Ri);var qi=ki;function Oi(t,e,r){Ri.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ti(e,16),this.z=new Ti(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}ki.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),i=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===i.redSqrt().redSqr().cmp(i)},Ni(Oi,Ri.BasePoint),ki.prototype.decodePoint=function(t,e){return this.point(Pi.toArray(t,e),1)},ki.prototype.point=function(t,e){return new Oi(this,t,e)},ki.prototype.pointFromJSON=function(t){return Oi.fromJSON(this,t)},Oi.prototype.precompute=function(){},Oi.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Oi.fromJSON=function(t,e){return new Oi(t,e[0],e[1]||t.one)},Oi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Oi.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Oi.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),i=t.redMul(e),n=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},Oi.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Oi.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),s=n.redMul(i),h=e.z.redMul(o.redAdd(s).redSqr()),u=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(h,u)},Oi.prototype.mul=function(t){for(var e=t.clone(),r=this,i=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var o=n.length-1;o>=0;o--)0===n[o]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},Oi.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Oi.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Oi.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},Oi.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Oi.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ci=ai,zi=v.exports,Li=W.exports,Gi=yi,Di=Ci.assert;function ji(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,Gi.call(this,"edwards",t),this.a=new zi(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new zi(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new zi(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Di(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}Li(ji,Gi);var Ui=ji;function Fi(t,e,r,i,n){Gi.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new zi(e,16),this.y=new zi(r,16),this.z=i?new zi(i,16):this.curve.one,this.t=n&&new zi(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}ji.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},ji.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},ji.prototype.jpoint=function(t,e,r,i){return this.point(t,e,r,i)},ji.prototype.pointFromX=function(t,e){(t=new zi(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=this.c2.redSub(this.a.redMul(r)),n=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=i.redMul(n.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var h=s.fromRed().isOdd();return(e&&!h||!e&&h)&&(s=s.redNeg()),this.point(t,s)},ji.prototype.pointFromY=function(t,e){(t=new zi(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=r.redSub(this.c2),n=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(n.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},ji.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),i=e.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===i.cmp(n)},Li(Fi,Gi.BasePoint),ji.prototype.pointFromJSON=function(t){return Fi.fromJSON(this,t)},ji.prototype.point=function(t,e,r,i){return new Fi(this,t,e,r,i)},Fi.fromJSON=function(t,e){return new Fi(t,e[0],e[1],e[2])},Fi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Fi.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Fi.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=i.redAdd(e),s=o.redSub(r),h=i.redSub(e),u=n.redMul(s),a=o.redMul(h),f=n.redMul(h),d=s.redMul(o);return this.curve.point(u,a,d,f)},Fi.prototype._projDbl=function(){var t,e,r,i,n,o,s=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var a=(i=this.curve._mulA(h)).redAdd(u);this.zOne?(t=s.redSub(h).redSub(u).redMul(a.redSub(this.curve.two)),e=a.redMul(i.redSub(u)),r=a.redSqr().redSub(a).redSub(a)):(n=this.z.redSqr(),o=a.redSub(n).redISub(n),t=s.redSub(h).redISub(u).redMul(o),e=a.redMul(i.redSub(u)),r=a.redMul(o))}else i=h.redAdd(u),n=this.curve._mulC(this.z).redSqr(),o=i.redSub(n).redSub(n),t=this.curve._mulC(s.redISub(i)).redMul(o),e=this.curve._mulC(i).redMul(h.redISub(u)),r=i.redMul(o);return this.curve.point(t,e,r)},Fi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Fi.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),s=n.redSub(i),h=n.redAdd(i),u=r.redAdd(e),a=o.redMul(s),f=h.redMul(u),d=o.redMul(u),l=s.redMul(h);return this.curve.point(a,f,l,d)},Fi.prototype._projAdd=function(t){var e,r,i=this.z.redMul(t.z),n=i.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),h=this.curve.d.redMul(o).redMul(s),u=n.redSub(h),a=n.redAdd(h),f=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),d=i.redMul(u).redMul(f);return this.curve.twisted?(e=i.redMul(a).redMul(s.redSub(this.curve._mulA(o))),r=u.redMul(a)):(e=i.redMul(a).redMul(s.redSub(o)),r=this.curve._mulC(u).redMul(a)),this.curve.point(d,e,r)},Fi.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},Fi.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},Fi.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},Fi.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},Fi.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},Fi.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Fi.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Fi.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Fi.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},Fi.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},Fi.prototype.toP=Fi.prototype.normalize,Fi.prototype.mixedAdd=Fi.prototype.add,function(t){var e=t;e.base=yi,e.short=Ei,e.mont=qi,e.edwards=Ui}(di),function(t){var e,r=t,i=De,n=di,o=ai.assert;function s(t){"short"===t.type?this.curve=new n.short(t):"edwards"===t.type?this.curve=new n.edwards(t):this.curve=new n.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var i=new s(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=s,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{e=require("./precomputed/secp256k1")}catch(t){e=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e]})}(fi);var $i,Hi={exports:{}};function Yi(t){this.rand=t}if(Hi.exports=function(t){return $i||($i=new Yi(null)),$i.generate(t)},Hi.exports.Rand=Yi,Yi.prototype.generate=function(t){return this._rand(t)},Yi.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Yi.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?Yi.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(Yi.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Wi=require("crypto");if("function"!=typeof Wi.randomBytes)throw new Error("Not supported");Yi.prototype._rand=function(t){return Wi.randomBytes(t)}}catch(t){}var Zi=v.exports,Ji=ai.assert;function Ki(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Xi=Ki;Ki.fromPublic=function(t,e,r){return e instanceof Ki?e:new Ki(t,{pub:e,pubEnc:r})},Ki.fromPrivate=function(t,e,r){return e instanceof Ki?e:new Ki(t,{priv:e,privEnc:r})},Ki.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ki.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Ki.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Ki.prototype._importPrivate=function(t,e){this.priv=new Zi(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Ki.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?Ji(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Ji(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Ki.prototype.derive=function(t){return t.validate()||Ji(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Ki.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Ki.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Ki.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Vi=v.exports,Qi=ai,tn=Qi.assert;function en(t,e){if(t instanceof en)return t;this._importDER(t,e)||(tn(t.r&&t.s,"Signature without r or s"),this.r=new Vi(t.r,16),this.s=new Vi(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var rn=en;function nn(){this.place=0}function on(t,e){var r=t[e.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;for(var n=0,o=0,s=e.place;o<i;o++,s++)n<<=8,n|=t[s],n>>>=0;return!(n<=127)&&(e.place=s,n)}function sn(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function hn(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}en.prototype._importDER=function(t,e){t=Qi.toArray(t,e);var r=new nn;if(48!==t[r.place++])return!1;var i=on(t,r);if(!1===i)return!1;if(i+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var n=on(t,r);if(!1===n)return!1;var o=t.slice(r.place,n+r.place);if(r.place+=n,2!==t[r.place++])return!1;var s=on(t,r);if(!1===s)return!1;if(t.length!==s+r.place)return!1;var h=t.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new Vi(o),this.s=new Vi(h),this.recoveryParam=null,!0},en.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=sn(e),r=sn(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];hn(i,e.length),(i=i.concat(e)).push(2),hn(i,r.length);var n=i.concat(r),o=[48];return hn(o,n.length),o=o.concat(n),Qi.encode(o,t)};var un=v.exports,an=ui,fn=ai,dn=fi,ln=Hi.exports,cn=fn.assert,pn=Xi,mn=rn;function gn(t){if(!(this instanceof gn))return new gn(t);"string"==typeof t&&(cn(Object.prototype.hasOwnProperty.call(dn,t),"Unknown curve "+t),t=dn[t]),t instanceof dn.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var vn=gn;gn.prototype.keyPair=function(t){return new pn(this,t)},gn.prototype.keyFromPrivate=function(t,e){return pn.fromPrivate(this,t,e)},gn.prototype.keyFromPublic=function(t,e){return pn.fromPublic(this,t,e)},gn.prototype.genKeyPair=function(t){t||(t={});for(var e=new an({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||ln(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new un(2));;){var n=new un(e.generate(r));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},gn.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},gn.prototype.sign=function(t,e,r,i){"object"==typeof r&&(i=r,r=null),i||(i={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new un(t,16));for(var n=this.n.byteLength(),o=e.getPrivate().toArray("be",n),s=t.toArray("be",n),h=new an({hash:this.hash,entropy:o,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new un(1)),a=0;;a++){var f=i.k?i.k(a):new un(h.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var d=this.g.mul(f);if(!d.isInfinity()){var l=d.getX(),c=l.umod(this.n);if(0!==c.cmpn(0)){var p=f.invm(this.n).mul(c.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var m=(d.getY().isOdd()?1:0)|(0!==l.cmp(c)?2:0);return i.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new mn({r:c,s:p,recoveryParam:m})}}}}}},gn.prototype.verify=function(t,e,r,i){t=this._truncateToN(new un(t,16)),r=this.keyFromPublic(r,i);var n=(e=new mn(e,"hex")).r,o=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,h=o.invm(this.n),u=h.mul(t).umod(this.n),a=h.mul(n).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,r.getPublic(),a)).isInfinity()&&s.eqXToP(n):!(s=this.g.mulAdd(u,r.getPublic(),a)).isInfinity()&&0===s.getX().umod(this.n).cmp(n)},gn.prototype.recoverPubKey=function(t,e,r,i){cn((3&r)===r,"The recovery param is more than two bits"),e=new mn(e,i);var n=this.n,o=new un(t),s=e.r,h=e.s,u=1&r,a=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&a)throw new Error("Unable to find sencond key candinate");s=a?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var f=e.r.invm(n),d=n.sub(o).mul(f).umod(n),l=h.mul(f).umod(n);return this.g.mulAdd(d,s,l)},gn.prototype.getKeyRecoveryParam=function(t,e,r,i){if(null!==(e=new mn(e,i)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(t,e,n)}catch(t){continue}if(o.eq(r))return n}throw new Error("Unable to find valid recovery factor")},new vn("secp256k1");const yn="qpzry9x8gf2tvdw0s3jn54khce6mua7l",bn=[996825010,642813549,513874426,1027748829,705979059],wn=t=>{let e=1;for(let r=0;r<t.length;++r){const i=e>>25;e=(33554431&e)<<5^t[r];for(let t=0;t<5;++t)i>>t&1&&(e^=bn[t])}return e},Mn=t=>{const e=[];let r;for(r=0;r<t.length;++r)e.push(t.charCodeAt(r)>>5);for(e.push(0),r=0;r<t.length;++r)e.push(31&t.charCodeAt(r));return ee.from(e)};function Sn(t,e,r,i=!0){let n=0,o=0;const s=[],h=(1<<r)-1;for(let i=0;i<t.length;++i){const u=t[i];if(u<0||u>>e!=0)return null;for(n=n<<e|u,o+=e;o>=r;)o-=r,s.push(n>>o&h)}if(i)o>0&&s.push(n<<r-o&h);else if(o>=e||n<<r-o&h)return null;return ee.from(s)}function An(t,e){const r=ee.concat([ee.from(Mn(t)),e,ee.from([0,0,0,0,0,0])]),i=1^wn(r),n=[];for(let t=0;t<6;++t)n.push(i>>5*(5-t)&31);return ee.from(n)}const _n=t=>{let e,r=!1,i=!1;for(e=0;e<t.length;++e){if(t.charCodeAt(e)<33||t.charCodeAt(e)>126)return null;t.charCodeAt(e)>=97&&t.charCodeAt(e)<=122&&(r=!0),t.charCodeAt(e)>=65&&t.charCodeAt(e)<=90&&(i=!0)}if(r&&i)return null;const n=(t=t.toLowerCase()).lastIndexOf("1");if(n<1||n+7>t.length||t.length>90)return null;const o=t.substring(0,n),s=[];for(e=n+1;e<t.length;++e){const r=yn.indexOf(t.charAt(e));if(-1===r)return null;s.push(r)}return function(t,e){return 1===wn(ee.concat([Mn(t),e]))}(o,ee.from(s))?{hrp:o,data:ee.from(s.slice(0,s.length-6))}:null},xn=t=>{Rt(t);const e=Tt(t),r=Sn(ee.from(e,"hex"),8,5);if(!r)throw new Error(It.CannotConvertBytes);return((t,e)=>{const r=ee.concat([e,An(t,e)]);let i=t+"1";for(let t=0;t<r.length;++t)i+=yn.charAt(r[t]);return i})("zil",r)},En={isValidChecksumAddress:t=>kt.isAddress(Tt(t))&&Pt(t)===t,fromBech32Address:t=>(t=>{const e=_n(t);if(!e)throw new Error(It.InvalidBech32);const{hrp:r,data:i}=e;if("zil"!==r)throw new Error(It.ExpectedHRP);const n=Sn(i,5,8,!1);if(!n)throw new Error(It.CannotConvertBytes);return Pt(n.toString("hex"))})(t),toHex:t=>Tt(t),toBech32Address:t=>kt.isBech32(t)?t:xn(t),normaliseAddress(t){if(kt.isBech32(t))return this.fromBech32Address(t);if(kt.isAddress(t))return Pt(t);throw Error("Wrong address format, should be either bech32 or checksummed address")},toChecksumAddress(t){return kt.isBech32(t)&&(t=this.fromBech32Address(t)),Pt(t)}};var In="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t};function Bn(t,e){var r={seen:[],stylize:Nn};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),qn(e)?r.showHidden=e:e&&Hn(r,e),zn(r.showHidden)&&(r.showHidden=!1),zn(r.depth)&&(r.depth=2),zn(r.colors)&&(r.colors=!1),zn(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Tn),Rn(r,t,r.depth)}function Tn(t,e){var r=Bn.styles[e];return r?"["+Bn.colors[r][0]+"m"+t+"["+Bn.colors[r][1]+"m":t}function Nn(t,e){return t}function Rn(t,e,r){if(t.customInspect&&e&&Un(e.inspect)&&e.inspect!==Bn&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return Cn(i)||(i=Rn(t,i,r)),i}var n=function(t,e){if(zn(e))return t.stylize("undefined","undefined");if(Cn(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(i=e,"number"==typeof i)return t.stylize(""+e,"number");var i;if(qn(e))return t.stylize(""+e,"boolean");if(On(e))return t.stylize("null","null")}(t,e);if(n)return n;var o=Object.keys(e),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),jn(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Pn(e);if(0===o.length){if(Un(e)){var h=e.name?": "+e.name:"";return t.stylize("[Function"+h+"]","special")}if(Ln(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Dn(e))return t.stylize(Date.prototype.toString.call(e),"date");if(jn(e))return Pn(e)}var u,a,f="",d=!1,l=["{","}"];(u=e,Array.isArray(u)&&(d=!0,l=["[","]"]),Un(e))&&(f=" [Function"+(e.name?": "+e.name:"")+"]");return Ln(e)&&(f=" "+RegExp.prototype.toString.call(e)),Dn(e)&&(f=" "+Date.prototype.toUTCString.call(e)),jn(e)&&(f=" "+Pn(e)),0!==o.length||d&&0!=e.length?r<0?Ln(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),a=d?function(t,e,r,i,n){for(var o=[],s=0,h=e.length;s<h;++s)Yn(e,String(s))?o.push(kn(t,e,r,i,String(s),!0)):o.push("");return n.forEach((function(n){n.match(/^\d+$/)||o.push(kn(t,e,r,i,n,!0))})),o}(t,e,r,s,o):o.map((function(i){return kn(t,e,r,s,i,d)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(a,f,l)):l[0]+f+l[1]}function Pn(t){return"["+Error.prototype.toString.call(t)+"]"}function kn(t,e,r,i,n,o){var s,h,u;if((u=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?h=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(h=t.stylize("[Setter]","special")),Yn(i,n)||(s="["+n+"]"),h||(t.seen.indexOf(u.value)<0?(h=On(r)?Rn(t,u.value,null):Rn(t,u.value,r-1)).indexOf("\n")>-1&&(h=o?h.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+h.split("\n").map((function(t){return"   "+t})).join("\n")):h=t.stylize("[Circular]","special")),zn(s)){if(o&&n.match(/^\d+$/))return h;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+h}function qn(t){return"boolean"==typeof t}function On(t){return null===t}function Cn(t){return"string"==typeof t}function zn(t){return void 0===t}function Ln(t){return Gn(t)&&"[object RegExp]"===$n(t)}function Gn(t){return"object"==typeof t&&null!==t}function Dn(t){return Gn(t)&&"[object Date]"===$n(t)}function jn(t){return Gn(t)&&("[object Error]"===$n(t)||t instanceof Error)}function Un(t){return"function"==typeof t}function Fn(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function $n(t){return Object.prototype.toString.call(t)}function Hn(t,e){if(!e||!Gn(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t}function Yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wn(t,e){if(t===e)return 0;for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0}Bn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Bn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Zn,Jn=Object.prototype.hasOwnProperty,Kn=Object.keys||function(t){var e=[];for(var r in t)Jn.call(t,r)&&e.push(r);return e},Xn=Array.prototype.slice;function Vn(){return void 0!==Zn?Zn:Zn="foo"===function(){}.name}function Qn(t){return Object.prototype.toString.call(t)}function to(t){return!Le(t)&&("function"==typeof jt.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function eo(t,e){t||uo(t,!0,e,"==",ao)}var ro,io=/\s*function\s+([^\(\s]*)\s*/;function no(t){if(Un(t)){if(Vn())return t.name;var e=t.toString().match(io);return e&&e[1]}}function oo(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return so(ho(t.actual),128)+" "+t.operator+" "+so(ho(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||uo;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,n=no(e),o=i.indexOf("\n"+n);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}}function so(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function ho(t){if(Vn()||!Un(t))return Bn(t);var e=no(t);return"[Function"+(e?": "+e:"")+"]"}function uo(t,e,r,i,n){throw new oo({message:r,actual:t,expected:e,operator:i,stackStartFunction:n})}function ao(t,e){t||uo(t,!0,e,"==",ao)}function fo(t,e,r,i){if(t===e)return!0;if(Le(t)&&Le(e))return 0===Wn(t,e);if(Dn(t)&&Dn(e))return t.getTime()===e.getTime();if(Ln(t)&&Ln(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(to(t)&&to(e)&&Qn(t)===Qn(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===Wn(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(Le(t)!==Le(e))return!1;var n=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==n&&n===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),function(t,e,r,i){if(null==t||null==e)return!1;if(Fn(t)||Fn(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=lo(t),o=lo(e);if(n&&!o||!n&&o)return!1;if(n)return fo(t=Xn.call(t),e=Xn.call(e),r);var s,h,u=Kn(t),a=Kn(e);if(u.length!==a.length)return!1;for(u.sort(),a.sort(),h=u.length-1;h>=0;h--)if(u[h]!==a[h])return!1;for(h=u.length-1;h>=0;h--)if(!fo(t[s=u[h]],e[s],r,i))return!1;return!0}(t,e,r,i))}return r?t===e:t==e}function lo(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function co(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function po(t,e,r,i){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),n=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!n&&uo(n,r,"Missing expected exception"+i);var o="string"==typeof i,s=!t&&n&&!r;if((!t&&jn(n)&&o&&co(n,r)||s)&&uo(n,r,"Got unwanted exception"+i),t&&n&&r&&!co(n,r)||!t&&n)throw n}eo.AssertionError=oo,In(oo,Error),eo.fail=uo,eo.ok=ao,eo.equal=function t(e,r,i){e!=r&&uo(e,r,i,"==",t)},eo.notEqual=function t(e,r,i){e==r&&uo(e,r,i,"!=",t)},eo.deepEqual=function t(e,r,i){fo(e,r,!1)||uo(e,r,i,"deepEqual",t)},eo.deepStrictEqual=function t(e,r,i){fo(e,r,!0)||uo(e,r,i,"deepStrictEqual",t)},eo.notDeepEqual=function t(e,r,i){fo(e,r,!1)&&uo(e,r,i,"notDeepEqual",t)},eo.notDeepStrictEqual=function t(e,r,i){fo(e,r,!0)&&uo(e,r,i,"notDeepStrictEqual",t)},eo.strictEqual=function t(e,r,i){e!==r&&uo(e,r,i,"===",t)},eo.notStrictEqual=function t(e,r,i){e===r&&uo(e,r,i,"!==",t)},eo.throws=function(t,e,r){po(!0,t,e,r)},eo.doesNotThrow=function(t,e,r){po(!1,t,e,r)},eo.ifError=function(t){if(t)throw t},function(t){t[t.gasPrice=2e3]="gasPrice",t[t.gasLimit=50]="gasLimit"}(ro||(ro={}));const mo=Object.freeze({isArray:t=>"[object Array]"===Object.prototype.toString.call(t),isObject:t=>"[object Object]"===Object.prototype.toString.call(t),isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(Number(t)),isError:t=>"[object Error]"===Object.prototype.toString.call(t),isString:t=>"[object String]"===Object.prototype.toString.call(t),isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isNull:t=>"[object Null]"===Object.prototype.toString.call(t),isUndefined:t=>"[object Undefined]"===Object.prototype.toString.call(t),isEmptyObject(t){return!!this.isObject(t)&&0===Object.getOwnPropertyNames(t).length},isEmptyArray(t){return!!this.isArray(t)&&0===t.length},getType:t=>Number.isNaN(t)?"NaN":Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase()});class go{constructor(t,e=!1){this.version=t.version,this.toAddr=t.toAddr,this.nonce=Number(t.nonce||0),this.amount=new y(t.amount||0),this.code=t.code||"",this.signature=t.signature,this.ContractAddress=t.ContractAddress,this.ID=t.hash,this.from=t.from||t.senderAddress,this.Info=t.Info,this.pubKey=t.pubKey,this.gasPrice=new y(t.gasPrice),this.gasLimit=b.fromNumber(Number(t.gasLimit||ro.gasLimit)),this.priority=t.priority,this.priority=e,this.receipt=t.receipt,eo(Boolean(this.toAddr),`toAddr ${It.RequiredParam}`),kt.isAddress(this.toAddr)&&(this.toAddr=En.toChecksumAddress(this.toAddr),this.toAddr=En.toBech32Address(this.toAddr));try{this.from=En.toBech32Address(this.from)}catch(t){}t.data&&mo.isString(t.data)?this.data=JSON.parse(t.data):this.data=null,this.receipt&&(this.epoch=this.receipt.epoch_num,this.cumulativeGas=this.receipt.cumulative_gas,this.success=this.receipt.success),this.data&&Array.isArray(this.data)&&(this.data.params=this.data.params.map(((t,e)=>{try{t&&"ByStr20"===t.type&&t.value&&kt.isBech32(t.value)&&(t.value=En.fromBech32Address(String(t.value))),t&&"List (ByStr20)"===t.type&&Array.isArray(t.value)&&(t.value=t.value.map((t=>kt.isBech32(t)?t=En.fromBech32Address(String(t)):t)))}catch(r){throw new Error(`${r.message} in param ${e}, type: ${t.type}, value: ${t.value}`)}return t})))}get payload(){const t=En.fromBech32Address(this.toAddr);return{amount:String(this.amount),gasPrice:String(this.gasPrice),gasLimit:String(this.gasLimit),code:this.code,data:this.data?JSON.stringify(this.data):"",nonce:this.nonce,priority:this.priority,toAddr:En.toHex(t),version:this.version,signature:this.signature}}get txParams(){return this.payload}get TranID(){return console.warn("TranID is deprecated and will be removed."),this.ID}get exceptions(){return this.receipt&&this.receipt.exceptions?this.receipt.exceptions:[]}get errors(){return this.receipt&&this.receipt.errors?this.receipt.errors:[]}get eventLogs(){return this.receipt&&this.receipt.event_logs?this.receipt.event_logs:[]}}class vo{constructor(t,e){this.Transaction=go,this.provider=t,this.wallet=e}new(t,e=!1){return new go(t,e)}}var yo,bo,wo,Mo,So,Ao,_o,xo,Eo,Io,Bo,To,No,Ro,Po,ko;class qo{constructor(t,e){yo.set(this,void 0),bo.set(this,void 0),o(this,yo,t,"f"),o(this,bo,e,"f")}async createTransaction(t,e=!1){const r=new go(t,e),i=await n(this,bo,"f").sign(r);return new go(i)}async getTransaction(t){eo(Boolean(t),`hash ${It.RequiredParam}`);const e=En.toHex(t),{error:r,result:i}=await n(this,yo,"f").send(zt.GetTransaction,String(e));return eo(Boolean(i),String(r)),new go(i)}getRecentTransactions(){return n(this,yo,"f").send(zt.GetRecentTransactions)}getTransactionsForTxBlockEx(t,e){return eo(!isNaN(e),`page ${It.ShouldBeNumber}`),eo(!isNaN(t),`txBlock ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetTransactionsForTxBlockEx,String(t),String(e))}getTxnBodiesForTxBlockEx(t,e){return eo(!isNaN(e),`page ${It.ShouldBeNumber}`),eo(!isNaN(t),`block ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetTxnBodiesForTxBlockEx,String(t),String(e))}getTxnBodiesForTxBlock(t){return eo(!isNaN(t),`block ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetTxnBodiesForTxBlock,String(t))}getTransactionsForTxBlock(t){return eo(!isNaN(t),"Txblock should be number"),n(this,yo,"f").send(zt.GetTransactionsForTxBlock,String(t))}getBlockChainInfo(){return n(this,yo,"f").send(zt.GetBlockchainInfo)}getShardingStructure(){return n(this,yo,"f").send(zt.GetShardingStructure)}getDSBlock(t){return eo(!isNaN(t),`blockNum ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetDSBlock,String(t))}getLatestDSBlock(){return n(this,yo,"f").send(zt.GetLatestDSBlock)}getNumDSBlocks(){return n(this,yo,"f").send(zt.GetNumDSBlocks)}getDSBlockRate(){return n(this,yo,"f").send(zt.GetDSBlockRate)}getDSBlockListing(t){return eo(!isNaN(t),`max ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.DSBlockListing,String(t))}getTxBlock(t){return eo(!isNaN(t),`blockNum ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetTxBlock,String(t))}getLatestTxBlock(){return n(this,yo,"f").send(zt.GetLatestTxBlock)}getNumTxBlocks(){return n(this,yo,"f").send(zt.GetNumTxBlocks)}getTxBlockRate(){return n(this,yo,"f").send(zt.GetTxBlockRate)}getTxBlockListing(t){return eo(!isNaN(t),`max ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.TxBlockListing,String(t))}getNumTransactions(){return n(this,yo,"f").send(zt.GetNumTransactions)}getTransactionRate(){return n(this,yo,"f").send(zt.GetTransactionRate)}getCurrentMiniEpoch(){return n(this,yo,"f").send(zt.GetCurrentMiniEpoch)}getCurrentDSEpoch(){return n(this,yo,"f").send(zt.GetCurrentDSEpoch)}getPrevDifficulty(){return n(this,yo,"f").send(zt.GetPrevDifficulty)}getPrevDSDifficulty(){return n(this,yo,"f").send(zt.GetPrevDSDifficulty)}getTotalCoinSupply(){return n(this,yo,"f").send(zt.GetTotalCoinSupply)}getMinerInfo(t){return eo(!isNaN(t),`dsBlockNumber ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetMinerInfo,String(t))}getNumTxnsTxEpoch(t){return eo(!isNaN(t),`epoch ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetNumTxnsTxEpoch,String(t))}getNumTxnsDSEpoch(t){return eo(!isNaN(t),`epoch ${It.ShouldBeNumber}`),n(this,yo,"f").send(zt.GetNumTxnsDSEpoch,String(t))}getMinimumGasPrice(){return n(this,yo,"f").send(zt.GetMinimumGasPrice)}getPendingTxn(t){console.warn('Method "getPendingTxn" is deprecated and will be disabled'),eo(Boolean(t),`hash ${It.RequiredParam}`);const e=En.toHex(t);return n(this,yo,"f").send(zt.GetPendingTxn,e)}getPendingTxns(){return console.warn('Method "GetPendingTxns" is deprecated and will be disabled'),n(this,yo,"f").send(zt.GetPendingTxns)}getBalance(t){eo(Boolean(t),`addr ${It.RequiredParam}`);const e=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetBalance,e)}getSmartContractCode(t){eo(Boolean(t),`addr ${It.RequiredParam}`);const e=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetSmartContractCode,e)}async getSmartContractInit(t){eo(Boolean(t),`addr ${It.RequiredParam}`);const e=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetSmartContractInit,e)}getSmartContractState(t){eo(Boolean(t),`addr ${It.RequiredParam}`);const e=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetSmartContractState,e)}getSmartContractSubState(t,e,r=[]){eo(Boolean(t),`addr ${It.RequiredParam}`),eo(Boolean(e),`variableName ${It.RequiredParam}`),eo(Array.isArray(r),"indices must be array");const i=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetSmartContractSubState,i,e,r)}getSmartContracts(t){eo(Boolean(t),`addr ${It.RequiredParam}`);const e=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetSmartContracts,e)}getContractAddressFromTransactionID(t){eo(Boolean(t),`hash ${It.RequiredParam}`);const e=En.toHex(t);return n(this,yo,"f").send(zt.GetContractAddressFromTransactionID,e)}getTransactionStatus(t){eo(Boolean(t),`hash ${It.RequiredParam}`);const e=En.toHex(t);return n(this,yo,"f").send(zt.GetTransactionStatus,e)}getStateProof(t,e,r){eo(Boolean(t),`addr ${It.RequiredParam}`),eo(Boolean(e),`variableHash ${It.RequiredParam}`),eo(!isNaN(r),`txBlock ${It.ShouldBeNumber}`);const i=En.toHex(e),o=En.toHex(En.normaliseAddress(t));return n(this,yo,"f").send(zt.GetStateProof,o,i,[String(r)])}getNetworkId(){return n(this,yo,"f").send(zt.GetNetworkId)}}function Oo(){try{return document.querySelector("link[rel*='icon']").href}catch(t){return null}}yo=new WeakMap,bo=new WeakMap;class Co{constructor(t,e){wo.add(this),Mo.set(this,void 0),So.set(this,void 0),Ao.set(this,!1),_o.set(this,!1),xo.set(this,void 0),Eo.set(this,"mainnet"),Io.set(this,null),this.txns=new Set,o(this,Mo,t,"f"),o(this,So,e,"f"),n(this,wo,"m",Bo).call(this)}get isConnect(){return n(this,Ao,"f")}get isEnable(){return n(this,_o,"f")}get net(){return n(this,Eo,"f")}get defaultAccount(){return n(this,Io,"f")}get http(){return n(this,xo,"f")}observableAccount(){return eo(this.isEnable,It.Disabled),eo(this.isConnect,It.Connect),{subscribe:t=>{const e=n(this,So,"f").on((e=>{switch(e.type){case i.ADDRESS_CHANGED:case i.GET_WALLET_DATA:case i.LOCK_STAUS:case i.RESPONSE_TO_DAPP:t(e.payload.account)}}));return{unsubscribe:()=>e()}}}}observableBlock(){return eo(this.isEnable,It.Disabled),eo(this.isConnect,It.Connect),{subscribe:t=>{const e=n(this,So,"f").on((e=>{e.type===i.NEW_BLOCK&&t(e.payload.block)}));return{unsubscribe:()=>e()}}}}observableNetwork(){return eo(this.isEnable,It.Disabled),eo(this.isConnect,It.Connect),{subscribe:t=>{const e=n(this,So,"f").on((e=>{switch(e.type){case i.GET_WALLET_DATA:case i.NETWORK_CHANGED:t(e.payload.netwrok)}}));return{unsubscribe:()=>e()}}}}observableTransaction(...t){return console.warn("this method is deprecated and will rework"),eo(this.isEnable,It.Disabled),eo(this.isConnect,It.Connect),t&&0!==t.length&&this.addTransactionsQueue(...t),{subscribe:t=>{const e=n(this,So,"f").on((e=>{if(e.type!==i.NEW_BLOCK)return;const r=e.payload.block;for(let e=0;e<r.TxHashes.length;e++){const i=r.TxHashes[e];for(let e=0;e<i.length;e++){const r=i[e];this.txns.has(r)&&(t(r),this.txns.delete(r))}}}));return{unsubscribe:()=>e()}}}}addTransactionsQueue(...t){console.warn("this method is deprecated and will rework");for(let e=0;e<t.length;e++){const r=t[e];this.txns.add(En.toHex(r))}return Array.from(this.txns)}async sign(t){return eo(this.isConnect,It.Connect),mo.isString(t)?n(this,wo,"m",To).call(this,String(t)):t instanceof go?n(this,wo,"m",No).call(this,t):Promise.reject(new TypeError(`payload ${It.MustBeObject} or ${It.MustBeString}`))}async connect(){const t=i.CONNECT_APP,e=r.CONTENT,s=Ct(),h=window.document.title,u=window.document.domain,a=Oo();return new m({type:t,payload:{title:h,domain:u,icon:a,uuid:s}}).send(n(this,Mo,"f"),e),new Promise((t=>{const e=n(this,So,"f").on((r=>{if(r.type===i.RESPONSE_TO_DAPP&&r.payload.uuid===s)return o(this,Ao,Boolean(r.payload.resolve),"f"),o(this,Io,r.payload.resolve||null,"f"),e(),t(Boolean(r.payload.resolve))}))}))}}Mo=new WeakMap,So=new WeakMap,Ao=new WeakMap,_o=new WeakMap,xo=new WeakMap,Eo=new WeakMap,Io=new WeakMap,wo=new WeakSet,Bo=function(){n(this,So,"f").on((t=>{switch(t.type){case i.ADDRESS_CHANGED:o(this,Io,t.payload.account,"f");break;case i.GET_WALLET_DATA:o(this,Io,t.payload.account,"f"),o(this,xo,t.payload.http,"f"),o(this,Eo,t.payload.netwrok,"f"),o(this,Ao,t.payload.isConnect,"f"),o(this,_o,t.payload.isEnable,"f");break;case i.LOCK_STAUS:o(this,_o,t.payload.isEnable,"f"),o(this,Io,t.payload.account,"f");break;case i.NETWORK_CHANGED:o(this,Eo,t.payload.netwrok,"f"),o(this,xo,t.payload.node,"f")}}))},To=function(t){const e=i.SIGN_MESSAGE,o=r.CONTENT,s=Ct(),h=window.document.title,u=Oo();return new m({type:e,payload:{content:t,uuid:s,title:h,icon:u}}).send(n(this,Mo,"f"),o),new Promise(((t,e)=>{const r=n(this,So,"f").on((n=>{if(n.type===i.SING_MESSAGE_RES&&n.payload.uuid===s)return n.payload&&n.payload.reject?(r(),e(n.payload.reject)):(r(),t(n.payload.resolve))}))}))},No=function(t){const e=i.CALL_TO_SIGN_TX,o=r.CONTENT,s=Ct(),h=Object.assign(Object.assign({},t.payload),{uuid:s,title:window.document.title,icon:Oo()});return new m({type:e,payload:h}).send(n(this,Mo,"f"),o),new Promise(((t,e)=>{const r=n(this,So,"f").on((n=>{if(n.type===i.TX_RESULT&&n.payload.uuid===s)return n.payload&&n.payload.reject?(r(),e(n.payload.reject)):(r(),t(n.payload.resolve))}))}))},function(t){t.ZIL_SWAP="0x459cb2d3baf7e61cfbd5fe362f289ae92b2babb0",t.SSN="0xa7c67d49c82c7dc1b73d231640b2e4d0661d37c1",t.SCAM="0xe66593414Ba537e965b5e0eB723a58b4d1fACc89",t.Phishing="c51a6786ec357e0984d9f2a9ff0a39506ecf0787",t.UD="0x9611c53be6d1b32058b2747bdececed7e1216793",t.ZIlPay="0xfbd07e692543d3064b9cf570b27faabfd7948da4",t.ZERO_ADDRESS="0x0000000000000000000000000000000000000000"}(Ro||(Ro={}));class zo{constructor(t,e,r,i){Po.add(this),this.transaction=t,this.code=r,this.init=i,e&&(this.address=En.normaliseAddress(e))}async deploy(t,e=!1){eo(Boolean(this.code),`this.code ${It.RequiredParam}`),eo(Boolean(this.init),`this.init ${It.RequiredParam}`);const{wallet:r}=this.transaction,i=this.transaction.new(Object.assign({priority:e,toAddr:Ro.ZERO_ADDRESS,code:this.code,data:JSON.stringify(this.init)},t)),n=await r.sign(i);return this.address=En.normaliseAddress(n.ContractAddress),[new go(n),this]}async call(t,e,r,i=!1){eo(Boolean(this.address),`this.address ${It.RequiredParam}`),eo(Boolean(t),`tag ${It.RequiredParam}`);const{wallet:o}=this.transaction,s=JSON.stringify({_tag:t,params:e}),h=this.transaction.new(Object.assign({data:s,priority:i,toAddr:n(this,Po,"a",ko)},r)),u=await o.sign(h);return new go(u)}async getState(){eo(Boolean(this.address),`this.address ${It.RequiredParam}`);const{RPCMethod:t}=this.transaction.provider,{result:e,error:r}=await this.transaction.provider.send(t.GetSmartContractState,n(this,Po,"a",ko));if(r)throw new Error(String(r));return e}async getSubState(t,e=[]){eo(Boolean(this.address),`this.address ${It.RequiredParam}`),eo(Boolean(t),`variableName ${It.RequiredParam}`),eo(Array.isArray(e),`indices ${It.RequiredParam}`);const{RPCMethod:r}=this.transaction.provider,{result:i,error:o}=await this.transaction.provider.send(r.GetSmartContractSubState,n(this,Po,"a",ko),t,e);if(o)throw new Error(String(o));return i}async getInit(){eo(Boolean(this.address),`this.address ${It.RequiredParam}`);const{RPCMethod:t}=this.transaction.provider,{result:e,error:r}=await this.transaction.provider.send(t.GetSmartContractInit,n(this,Po,"a",ko));if(r)throw new Error(String(r));return this.init=e,e}async getCode(){eo(Boolean(this.address),`this.address ${It.RequiredParam}`);const{RPCMethod:t}=this.transaction.provider,{result:e,error:r}=await this.transaction.provider.send(t.GetSmartContractCode,n(this,Po,"a",ko)),i=String(e.code);if(r)throw new Error(String(r));return this.code=i,i}}Po=new WeakSet,ko=function(){return En.toHex(this.address)};class Lo{constructor(t){this.transactions=t}at(t,e){return new zo(this.transactions,t,e)}new(t,e){return new zo(this.transactions,null,t,e)}}const Go=Object.freeze(new class{constructor(){this.stream=new l(r.INJECTED),this.subject=new p,this.stream.listen((t=>{this.subject.emit(t)}))}initialized(){const t=r.CONTENT;new m({type:i.GET_WALLET_DATA,payload:{}}).send(this.stream,t)}}),Do=Object.freeze(new class{constructor(t,e){this.utils=Ot,this.crypto=En,this.provider=new Dt(t,e),this.wallet=new Co(t,e),this.blockchain=new qo(this.provider,this.wallet),this.transactions=new vo(this.provider,this.wallet),this.contracts=new Lo(this.transactions)}}(Go.stream,Go.subject));return Go.initialized(),window.zilPay=Do,t.handler=Go,t.zilPay=Do,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
